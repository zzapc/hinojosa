INCLUDE zdyn_cl_scenario_test=========ccmac.

class ZDYN_CL_SCENARIO_TEST_ROUTTY_E definition
  public
  inheriting from ZDYN_CL_SCENARIO_TEST_ROUTTY
  create public .

public section.

  methods GET_SC_ROUTTYEXP_IV_TO_PD_01
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_ROUTTYEXP_IV_TO_PD_03
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_ROUTTYEXP_IV_TO_PD_04
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_ROUTTYEXP_IV_TO_PD_07
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_ROUTTYEXP_IV_TO_PD_08
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_BILL_DOC_CREATED_01
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_ROUTTYEXP_IV_TO_PD_06
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_CUSTOMER_TO_ROUTTYAP_09
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_CUSTOMER_TO_ROUTTYAP_10
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_CUSTOMER_TO_ROUTTYAP_11
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_SUPPLIER_TO_ROUTTY_09
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_SUPPLIER_TO_ROUTTY_10
    returning
      value(ER_SCENARIO) type ref to DATA .
  methods GET_SC_SUPPLIER_TO_ROUTTY_11
    returning
      value(ER_SCENARIO) type ref to DATA .
protected section.

  methods CREATE_CUSTOMER_FILE_09
    importing
      !II_NUMBER type INT1
    exporting
      !ER_DATA type ref to DATA .
  methods CREATE_SUPPLIER_FILE_09
    importing
      !II_NUMBER type INT1
    exporting
      !ER_DATA type ref to DATA .
  methods CREATE_BILL_DOC_XML_01
    exporting
      !ES_RESULT type STRING .
  methods CREATE_BILL_DOC_STRUCT_01
    returning
      value(ER_DOC) type ref to DATA .
  methods GET_BILL_DOC_STRUCT_01
    returning
      value(ER_DOC) type ref to DATA .
  methods CREATE_GET_VBRP
    exporting
      !ER_VBRP type ref to DATA .
private section.
endclass. "ZDYN_CL_SCENARIO_TEST_ROUTTY_E definition
class ZDYN_CL_SCENARIO_TEST_ROUTTY_E implementation.
METHOD CREATE_BILL_DOC_STRUCT_01.

  DATA: lst_hd_adr       TYPE LINE OF lbbil_invoice-hd_adr,
        lst_hd_part_add  TYPE LINE OF lbbil_invoice-hd_part_add,
        lst_hd_card      TYPE LINE OF lbbil_invoice-hd_card,
        lst_hd_pay       TYPE LINE OF lbbil_invoice-hd_pay,
        lst_hd_kond      TYPE LINE OF lbbil_invoice-hd_kond,
        lst_hd_fin       TYPE LINE OF lbbil_invoice-hd_fin,
        lst_hd_tech      TYPE LINE OF lbbil_invoice-hd_tech,
        lst_hd_downpay   TYPE LINE OF lbbil_invoice-hd_downpay,
        lst_it_gen       TYPE LINE OF lbbil_invoice-it_gen,
        lst_it_adr       TYPE LINE OF lbbil_invoice-it_adr,
        lst_it_price     TYPE LINE OF lbbil_invoice-it_price,
        lst_it_kond      TYPE LINE OF lbbil_invoice-it_kond,
        lst_it_ref       TYPE LINE OF lbbil_invoice-it_ref,
        lst_it_refdlv    TYPE LINE OF lbbil_invoice-it_refdlv,
        lst_it_reford    TYPE LINE OF lbbil_invoice-it_reford,
        lst_it_refpurord TYPE LINE OF lbbil_invoice-it_refpurord,
        lst_it_refvag    TYPE LINE OF lbbil_invoice-it_refvag,
        lst_it_refvg2    TYPE LINE OF lbbil_invoice-it_refvg2,
        lst_it_refvkt    TYPE LINE OF lbbil_invoice-it_refvkt,
        lst_it_tech      TYPE LINE OF lbbil_invoice-it_tech,
        lst_it_fin       TYPE LINE OF lbbil_invoice-it_fin,
        lst_it_confitm   TYPE LINE OF lbbil_invoice-it_confitm,
        lst_it_confbatch TYPE LINE OF lbbil_invoice-it_confbatch.

  FIELD-SYMBOLS: <st_doc> TYPE lbbil_invoice.

  CREATE DATA er_doc LIKE <st_doc>.
  ASSIGN er_doc->* TO <st_doc>.


  <st_doc>-hd_gen-bil_number = '0090039774'.
  <st_doc>-hd_gen-sold_to_party = '0000049001'.
  <st_doc>-hd_gen-payer = '0000049001'.
  <st_doc>-hd_gen-t001_vat = 'DE345740205'.
  <st_doc>-hd_gen-incoterms1 = 'EXW'.
  <st_doc>-hd_gen-incoterms2 = 'Frankfurt'.
  <st_doc>-hd_gen-terms_paym = '0001'.
  <st_doc>-hd_gen-bil_waerk = 'EUR'.
  <st_doc>-hd_gen-bil_netwr = '4300.0'.
  <st_doc>-hd_gen-bil_disc = '5117.0'.
  <st_doc>-hd_gen-bil_tax = '817.0'.
  <st_doc>-hd_gen-bil_vbtype = 'M'.
  <st_doc>-hd_gen-bil_cat = 'L'.
  <st_doc>-hd_gen-bil_type = 'F2'.
  <st_doc>-hd_gen-bil_date = '2022-11-08'.
  <st_doc>-hd_gen-brt_weight = '667.5'.
  <st_doc>-hd_gen-net_weight = '467.5'.
  <st_doc>-hd_gen-unit_of_weight = 'KG'.
  <st_doc>-hd_gen-bil_edate = '2022-11-08'.
  <st_doc>-hd_gen-bil_ename = 'ZARKIPI'.
  <st_doc>-hd_gen-bil_schema = 'RVAA01'.
  <st_doc>-hd_gen-kond_numb = '0000092780'.
  <st_doc>-hd_gen-il_type = 'LR'.
  <st_doc>-hd_gen-dlv_land = 'DE'.
  <st_doc>-hd_gen-landtx = 'DE'.
  <st_doc>-hd_gen-kidno = '0090039774'.
  <st_doc>-hd_gen-xegld_l1 = 'X'.
  <st_doc>-hd_gen-xegld_co = 'X'.
  <st_doc>-hd_gen-dpend = '5117.0'.
  <st_doc>-hd_gen-dpmws_end = '817.0'.

  <st_doc>-hd_gen_descript-bil_number = '0090039774'.
  <st_doc>-hd_gen_descript-name_incoterms1 = 'From plant'.
  <st_doc>-hd_gen_descript-name_paymterm = 'Special Payment Terms 0001'.
  <st_doc>-hd_gen_descript-name_pterms1 = 'Up to 08.11.2022 without deduction'.
  <st_doc>-hd_gen_descript-zfbdt = '2022-11-08'.

  <st_doc>-hd_org-bil_number = '0090039774'.
  <st_doc>-hd_org-salesorg = '1049'.
  <st_doc>-hd_org-salesorg_adr = '0000730181'.
  <st_doc>-hd_org-salesorg_spras = 'D'.
  <st_doc>-hd_org-distrb_channel = '10'.
  <st_doc>-hd_org-division = '00'.
  <st_doc>-hd_org-comp_code = '1049'.

  <st_doc>-hd_ref-bil_number = '0090039774'.
  <st_doc>-hd_ref-deliv_numb = '0080018011'.
  <st_doc>-hd_ref-deliv_date = '2022-11-17'.
  <st_doc>-hd_ref-deliv_ledat = '2022-11-08'.
  <st_doc>-hd_ref-order_numb = '0000020210'.
  <st_doc>-hd_ref-order_date = '2022-11-08'.
  <st_doc>-hd_ref-purch_no = 'PZ_006'.
  <st_doc>-hd_ref-purch_no_c = 'PZ_006'.

  <st_doc>-hd_komk-bil_number = '0090039774'.
  <st_doc>-hd_komk-supos = '4300.0'.
  <st_doc>-hd_komk-fkwrt = '5117.0'.
  <st_doc>-hd_komk-waerk = 'EUR'.
*  <st_doc>-hd_komk-kurrf = '1.0'.

* HD_ADR
  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'AG'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'RE'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'RG'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'WE'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  lst_hd_adr-bil_item = '000010'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

* HD_PART_BIL
  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'AG'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'RE'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'RG'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-bil_item = '000010'.
  lst_hd_part_add-partn_role = 'WE'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

* HD_KOND
  lst_hd_kond-bil_number = '0090039774'.
  lst_hd_kond-stunr = '915'.
  lst_hd_kond-zaehk = '11'.
  lst_hd_kond-kappl = 'V'.
  lst_hd_kond-kschl = 'MWST'.
  lst_hd_kond-krech = 'A'.
  lst_hd_kond-kawrt = '4300.0'.
  lst_hd_kond-awein = 'EUR'.
  lst_hd_kond-awei1 = 'EUR'.
  lst_hd_kond-kbetr = '190.0'.
  lst_hd_kond-koein = '%'.
  lst_hd_kond-koei1 = '3'.
  lst_hd_kond-kntyp = 'D'.
  lst_hd_kond-kherk = 'E'.
  lst_hd_kond-kwert = '817.0'.
  lst_hd_kond-ksteu = 'A'.
  lst_hd_kond-koaid = 'D'.
  lst_hd_kond-drukz = 'S'.
  lst_hd_kond-vtext = 'Output Tax'.
  lst_hd_kond-mwskz = 'A1'.
  APPEND lst_hd_kond TO <st_doc>-hd_kond.

* HD_FIN
  lst_hd_fin-bil_number = '0090039774'.
  lst_hd_fin-bil_number = 'GAWRD>FÜNFTAUSENDEINHUNDERTSIEBZEHN EUR NULL'.
  lst_hd_fin-bil_number = 'WADAT_IST_LF>2022-11-08'.
  APPEND lst_hd_fin TO <st_doc>-hd_fin.

* IT_GEN
  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000010'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-100'.
  lst_it_gen-mat_entrd = '100-100'.
  lst_it_gen-short_text = 'Casings'.
  lst_it_gen-fkimg = '10.0'.
  lst_it_gen-sales_unit = 'ST'.
  lst_it_gen-inv_qty_stock = '10.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '30.0'.
  lst_it_gen-gross_wt = '30.0'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '1'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000020'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-200'.
  lst_it_gen-mat_entrd = '100-200'.
  lst_it_gen-short_text = 'Actuation'.
  lst_it_gen-fkimg = '15.0'.
  lst_it_gen-sales_unit = 'ST'.
  lst_it_gen-inv_qty_stock = '15.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '37.5'.
  lst_it_gen-gross_wt = '37.5'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '1'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000030'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-300'.
  lst_it_gen-mat_entrd = '100-300'.
  lst_it_gen-short_text = 'Casings'.
  lst_it_gen-fkimg = '1.0'.
  lst_it_gen-sales_unit = 'PAL'.
  lst_it_gen-inv_qty_stock = '200.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '400.0'.
  lst_it_gen-gross_wt = '600.0'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '200'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

* IT_PRICE
  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000010'.
  lst_it_price-kzwi1 = '1000.0'.
  lst_it_price-kzwi2 = '1000.0'.
  lst_it_price-kzwi3 = '1000.0'.
  lst_it_price-netwr = '1000.0'.
  lst_it_price-mwsbp = '190.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000020'.
  lst_it_price-kzwi1 = '3000.0'.
  lst_it_price-kzwi2 = '3000.0'.
  lst_it_price-kzwi3 = '3000.0'.
  lst_it_price-netwr = '3000.0'.
  lst_it_price-mwsbp = '570.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000030'.
  lst_it_price-kzwi1 = '300.0'.
  lst_it_price-kzwi2 = '300.0'.
  lst_it_price-kzwi3 = '300.0'.
  lst_it_price-netwr = '300.0'.
  lst_it_price-mwsbp = '57.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

* IT_KOND
  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000010'.
  lst_it_kond-kposn = '000010'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '100.0'.
  lst_it_kond-awein = 'ST'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '100.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'ST'.
  lst_it_kond-kumza = '1'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '1000.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000020'.
  lst_it_kond-kposn = '000020'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '150.0'.
  lst_it_kond-awein = 'ST'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '200.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'ST'.
  lst_it_kond-kumza = '1'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '3000.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000030'.
  lst_it_kond-kposn = '000030'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '10.0'.
  lst_it_kond-awein = 'PAL'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '300.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'PAL'.
  lst_it_kond-kumza = '200'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '300.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

* IT_REF
  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000010'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000010'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000020'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000020'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000030'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000030'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

* IT_REFDLV
  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000010'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000010'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000020'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000020'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000030'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000030'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

* IT_REFPURORD
  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000010'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000020'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000030'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

* IT_FIN
  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000010'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000020'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000030'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

ENDMETHOD.
METHOD CREATE_BILL_DOC_XML_01.

  CONCATENATE
'<?xml version ="1.0" encoding="UTF-8" ?>'
'<rsm:CrossIndustryDocument'
'  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'
'  xmlns:rsm="urn:ferd:CrossIndustryDocument:invoice:1p0"'
'  xmlns:ram="urn:un:unece:uncefact:data:standard:ReusableAggregateBusinessInformationEntity:12"'
'  xmlns:udt="urn:un:unece:uncefact:data:standard:UnqualifiedDataType:15"'
'  xmlns:zdyn="zdyn">'
'  <rsm:SpecifiedExchangedDocumentContext>'
'   <ram:TestIndicator>'
'     <udt:Indicator>false</udt:Indicator>'
'   </ram:TestIndicator>'
'   <ram:GuidelineSpecifiedDocumentContextParameter>'
'     <ram:ID>urn:ferd:CrossIndustryDocument:invoice:1p0:extended</ram:ID>'
'   </ram:GuidelineSpecifiedDocumentContextParameter>'
'  </rsm:SpecifiedExchangedDocumentContext>'
'  <rsm:HeaderExchangedDocument>'
'   <ram:ID>90039774</ram:ID>'
'   <ram:Name>Invoice</ram:Name>'
'   <ram:TypeCode>380</ram:TypeCode>'
'   <ram:IssueDateTime>'
'     <udt:DateTimeString format="102">1--12022</udt:DateTimeString>'
'   </ram:IssueDateTime>'
'  </rsm:HeaderExchangedDocument>'
'  <rsm:SpecifiedSupplyChainTradeTransaction>'
'   <ram:ApplicableSupplyChainTradeAgreement>'
'     <ram:SellerTradeParty>'
'       <ram:ID>1049</ram:ID>'
'       <ram:Name>Dynatos Deutschland GmbH</ram:Name>'
'       <ram:PostalTradeAddress>'
'         <ram:PostcodeCode>60311</ram:PostcodeCode>'
'         <ram:LineOne>Zeil 1</ram:LineOne>'
'         <ram:CityName>Frankfurt</ram:CityName>'
'         <ram:CountryID>DE</ram:CountryID>'
'       </ram:PostalTradeAddress>'
'       <ram:SpecifiedTaxRegistration>'
'         <ram:ID schemeID="VA">DE345740205</ram:ID>'
'       </ram:SpecifiedTaxRegistration>'
'     </ram:SellerTradeParty>'
'     <ram:BuyerTradeParty>'
'       <ram:ID>49001</ram:ID>'
'       <ram:Name>Coupa Deutschland</ram:Name>'
'       <ram:PostalTradeAddress>'
'         <ram:PostcodeCode>76227</ram:PostcodeCode>'
'         <ram:LineOne>Killisfeldstr. 30</ram:LineOne>'
'         <ram:CityName>Karlsruhe</ram:CityName>'
'         <ram:CountryID>DE</ram:CountryID>'
'       </ram:PostalTradeAddress>'
'       <ram:SpecifiedTaxRegistration>'
'         <ram:ID schemeID="VA">DE000000001</ram:ID>'
'       </ram:SpecifiedTaxRegistration>'
'     </ram:BuyerTradeParty>'
'     <ram:BuyerOrderReferencedDocument>'
'       <ram:ID>PZ_006</ram:ID>'
'     </ram:BuyerOrderReferencedDocument>'
'     <ram:ContractReferencedDocument>'
'       <ram:ID>20210</ram:ID>'
'     </ram:ContractReferencedDocument>'
'     <ram:CustomerOrderReferencedDocument>'
'           </ram:CustomerOrderReferencedDocument>'
'   </ram:ApplicableSupplyChainTradeAgreement>'
'   <ram:ApplicableSupplyChainTradeDelivery>'
'     <ram:ActualDeliverySupplyChainEvent>'
'           </ram:ActualDeliverySupplyChainEvent>'
'     <ram:DeliveryNoteReferencedDocument>'
'       <ram:ID>80018011</ram:ID>'
'     </ram:DeliveryNoteReferencedDocument>'
'   </ram:ApplicableSupplyChainTradeDelivery>'
'   <ram:ApplicableSupplyChainTradeSettlement>'
'     <ram:PaymentReference>0090039774</ram:PaymentReference>'
'     <ram:InvoiceCurrencyCode>EUR</ram:InvoiceCurrencyCode>'
'     <ram:InvoiceeTradeParty>'
'       <ram:ID>49001</ram:ID>'
'       <ram:Name>Coupa Deutschland</ram:Name>'
'       <ram:PostalTradeAddress>'
'         <ram:PostcodeCode>76227</ram:PostcodeCode>'
'         <ram:CityName>Karlsruhe</ram:CityName>'
'       </ram:PostalTradeAddress>'
'     </ram:InvoiceeTradeParty>'
'     <ram:SpecifiedTradeSettlementPaymentMeans>'
'       <ram:TypeCode>42</ram:TypeCode>'
'       <ram:PayerPartyDebtorFinancialAccount>'
'             </ram:PayerPartyDebtorFinancialAccount>'
'       <ram:PayeePartyCreditorFinancialAccount>'
'         <ram:IBANID>DE935007001000300040</ram:IBANID>'
'       </ram:PayeePartyCreditorFinancialAccount>'
'       <ram:PayerSpecifiedDebtorFinancialInstitution>'
'             </ram:PayerSpecifiedDebtorFinancialInstitution>'
'       <ram:PayeeSpecifiedCreditorFinancialInstitution>'
'         <ram:BICID>DEUTDEFFXXX</ram:BICID>'
'       </ram:PayeeSpecifiedCreditorFinancialInstitution>'
'     </ram:SpecifiedTradeSettlementPaymentMeans>'
'     <ram:SpecifiedTradeSettlementPaymentMeans>'
'       <ram:TypeCode>42</ram:TypeCode>'
'       <ram:PayerPartyDebtorFinancialAccount>'
'             </ram:PayerPartyDebtorFinancialAccount>'
'       <ram:PayeePartyCreditorFinancialAccount>'
'             </ram:PayeePartyCreditorFinancialAccount>'
'       <ram:PayerSpecifiedDebtorFinancialInstitution>'
'             </ram:PayerSpecifiedDebtorFinancialInstitution>'
'       <ram:PayeeSpecifiedCreditorFinancialInstitution>'
'         <ram:BICID>DEUTDESM672</ram:BICID>'
'         <ram:Name>Dresdner Bank</ram:Name>'
'       </ram:PayeeSpecifiedCreditorFinancialInstitution>'
'     </ram:SpecifiedTradeSettlementPaymentMeans>'
'     <ram:ApplicableTradeTax>'
'       <ram:CalculatedAmount currencyID="EUR">817.00</ram:CalculatedAmount>'
'       <ram:TypeCode>A1</ram:TypeCode>'
'       <ram:BasisAmount currencyID="EUR">4300.00</ram:BasisAmount>'
'       <ram:ApplicablePercent>19.00</ram:ApplicablePercent>'
'     </ram:ApplicableTradeTax>'
'     <ram:BillingSpecifiedPeriod>'
'       <ram:StartDateTime>'
'             </ram:StartDateTime>'
'       <ram:EndDateTime>'
'             </ram:EndDateTime>'
'     </ram:BillingSpecifiedPeriod>'
'     <ram:SpecifiedTradeSettlementMonetarySummation>'
'       <ram:LineTotalAmount currencyID="EUR">5117.00</ram:LineTotalAmount>'
'       <ram:ChargeTotalAmount currencyID="EUR">0.00</ram:ChargeTotalAmount>'
'       <ram:AllowanceTotalAmount currencyID="EUR">0.00</ram:AllowanceTotalAmount>'
'       <ram:TaxBasisTotalAmount currencyID="EUR">4300.00</ram:TaxBasisTotalAmount>'
'       <ram:TaxTotalAmount currencyID="EUR">817.00</ram:TaxTotalAmount>'
'       <ram:GrandTotalAmount currencyID="EUR">5117.00</ram:GrandTotalAmount>'
'     </ram:SpecifiedTradeSettlementMonetarySummation>'
'     <ram:ReceivableSpecifiedTradeAccountingAccount>'
'           </ram:ReceivableSpecifiedTradeAccountingAccount>'
'   </ram:ApplicableSupplyChainTradeSettlement>'
'   <ram:IncludedSupplyChainTradeLineItem>'
'     <ram:AssociatedDocumentLineDocument>'
'       <ram:LineID>000010</ram:LineID>'
'     </ram:AssociatedDocumentLineDocument>'
'     <ram:SpecifiedSupplyChainTradeAgreement>'
'       <ram:BuyerOrderReferencedDocument>'
'         <ram:ID>PZ_006</ram:ID>'
'       </ram:BuyerOrderReferencedDocument>'
'       <ram:ContractReferencedDocument>'
'             </ram:ContractReferencedDocument>'
'       <ram:GrossPriceProductTradePrice>'
'             </ram:GrossPriceProductTradePrice>'
'       <ram:NetPriceProductTradePrice>'
'         <ram:ChargeAmount currencyID="EUR">100.0000</ram:ChargeAmount>'
'         <ram:BasisQuantity unitCode="PCE">10.0000</ram:BasisQuantity> '
'       </ram:NetPriceProductTradePrice>'
'     </ram:SpecifiedSupplyChainTradeAgreement>'
'     <ram:SpecifiedSupplyChainTradeDelivery>'
'       <ram:BilledQuantity unitCode="PCE">10.0000</ram:BilledQuantity> '
'       <ram:DeliveryNoteReferencedDocument>'
'         <ram:LineID>000010</ram:LineID>'
'         <ram:ID>80018011</ram:ID>'
'       </ram:DeliveryNoteReferencedDocument>'
'     </ram:SpecifiedSupplyChainTradeDelivery>'
'     <ram:SpecifiedSupplyChainTradeSettlement>'
'       <ram:ApplicableTradeTax>'
'         <ram:CalculatedAmount currencyID="EUR">190.00</ram:CalculatedAmount>'
'         <ram:TypeCode>A1</ram:TypeCode>'
'         <ram:BasisAmount currencyID="EUR">1000.00</ram:BasisAmount>'
'         <ram:ApplicablePercent>19.00</ram:ApplicablePercent>'
'       </ram:ApplicableTradeTax>'
'       <ram:SpecifiedTradeSettlementMonetarySummation>'
'         <ram:LineTotalAmount currencyID="EUR">1000.0000</ram:LineTotalAmount>'
'       </ram:SpecifiedTradeSettlementMonetarySummation>'
'     </ram:SpecifiedSupplyChainTradeSettlement>'
'     <ram:SpecifiedTradeProduct>'
'       <ram:SellerAssignedID>100-100</ram:SellerAssignedID>'
'       <ram:Name>Casings</ram:Name>'
'     </ram:SpecifiedTradeProduct>'
'   </ram:IncludedSupplyChainTradeLineItem>'
'   <ram:IncludedSupplyChainTradeLineItem>'
'     <ram:AssociatedDocumentLineDocument>'
'       <ram:LineID>000020</ram:LineID>'
'     </ram:AssociatedDocumentLineDocument>'
'     <ram:SpecifiedSupplyChainTradeAgreement>'
'       <ram:BuyerOrderReferencedDocument>'
'         <ram:ID>PZ_006</ram:ID>'
'       </ram:BuyerOrderReferencedDocument>'
'       <ram:ContractReferencedDocument>'
'             </ram:ContractReferencedDocument>'
'       <ram:GrossPriceProductTradePrice>'
'             </ram:GrossPriceProductTradePrice>'
'       <ram:NetPriceProductTradePrice>'
'         <ram:ChargeAmount currencyID="EUR">200.0000</ram:ChargeAmount>'
'         <ram:BasisQuantity unitCode="PCE">15.0000</ram:BasisQuantity> '
'       </ram:NetPriceProductTradePrice>'
'     </ram:SpecifiedSupplyChainTradeAgreement>'
'     <ram:SpecifiedSupplyChainTradeDelivery>'
'       <ram:BilledQuantity unitCode="PCE">15.0000</ram:BilledQuantity> '
'       <ram:DeliveryNoteReferencedDocument>'
'         <ram:LineID>000020</ram:LineID>'
'         <ram:ID>80018011</ram:ID>'
'       </ram:DeliveryNoteReferencedDocument>'
'     </ram:SpecifiedSupplyChainTradeDelivery>'
'     <ram:SpecifiedSupplyChainTradeSettlement>'
'       <ram:ApplicableTradeTax>'
'         <ram:CalculatedAmount currencyID="EUR">570.00</ram:CalculatedAmount>'
'         <ram:TypeCode>A1</ram:TypeCode>'
'         <ram:BasisAmount currencyID="EUR">3000.00</ram:BasisAmount>'
'         <ram:ApplicablePercent>19.00</ram:ApplicablePercent>'
'       </ram:ApplicableTradeTax>'
'       <ram:SpecifiedTradeSettlementMonetarySummation>'
'         <ram:LineTotalAmount currencyID="EUR">3000.0000</ram:LineTotalAmount>'
'       </ram:SpecifiedTradeSettlementMonetarySummation>'
'     </ram:SpecifiedSupplyChainTradeSettlement>'
'     <ram:SpecifiedTradeProduct>'
'       <ram:SellerAssignedID>100-200</ram:SellerAssignedID>'
'       <ram:Name>Actuation</ram:Name>'
'     </ram:SpecifiedTradeProduct>'
'   </ram:IncludedSupplyChainTradeLineItem>'
'   <ram:IncludedSupplyChainTradeLineItem>'
'     <ram:AssociatedDocumentLineDocument>'
'       <ram:LineID>000030</ram:LineID>'
'     </ram:AssociatedDocumentLineDocument>'
'     <ram:SpecifiedSupplyChainTradeAgreement>'
'       <ram:BuyerOrderReferencedDocument>'
'         <ram:ID>PZ_006</ram:ID>'
'       </ram:BuyerOrderReferencedDocument>'
'       <ram:ContractReferencedDocument>'
'             </ram:ContractReferencedDocument>'
'       <ram:GrossPriceProductTradePrice>'
'             </ram:GrossPriceProductTradePrice>'
'       <ram:NetPriceProductTradePrice>'
'         <ram:ChargeAmount currencyID="EUR">300.0000</ram:ChargeAmount>'
'         <ram:BasisQuantity unitCode="PCE">1.0000</ram:BasisQuantity> '
'       </ram:NetPriceProductTradePrice>'
'     </ram:SpecifiedSupplyChainTradeAgreement>'
'     <ram:SpecifiedSupplyChainTradeDelivery>'
'       <ram:BilledQuantity unitCode="PF">1.0000</ram:BilledQuantity>'
'       <ram:DeliveryNoteReferencedDocument>'
'         <ram:LineID>000030</ram:LineID>'
'         <ram:ID>80018011</ram:ID>'
'       </ram:DeliveryNoteReferencedDocument>'
'     </ram:SpecifiedSupplyChainTradeDelivery>'
'     <ram:SpecifiedSupplyChainTradeSettlement>'
'       <ram:ApplicableTradeTax>'
'         <ram:CalculatedAmount currencyID="EUR">57.00</ram:CalculatedAmount>'
'         <ram:TypeCode>A1</ram:TypeCode>'
'         <ram:BasisAmount currencyID="EUR">300.00</ram:BasisAmount>'
'         <ram:ApplicablePercent>19.00</ram:ApplicablePercent>'
'       </ram:ApplicableTradeTax>'
'       <ram:SpecifiedTradeSettlementMonetarySummation>'
'         <ram:LineTotalAmount currencyID="EUR">300.0000</ram:LineTotalAmount>'
'       </ram:SpecifiedTradeSettlementMonetarySummation>'
'     </ram:SpecifiedSupplyChainTradeSettlement>'
'     <ram:SpecifiedTradeProduct>'
'       <ram:SellerAssignedID>100-300</ram:SellerAssignedID>'
'       <ram:Name>Casings</ram:Name>'
'     </ram:SpecifiedTradeProduct>'
'   </ram:IncludedSupplyChainTradeLineItem>'
'  </rsm:SpecifiedSupplyChainTradeTransaction>'
'</rsm:CrossIndustryDocument>'

  INTO es_result.

ENDMETHOD.
METHOD create_customer_file_09.

  DATA: ls_file   TYPE string,
        lx_string TYPE xstring.
  FIELD-SYMBOLS: <t_data> TYPE rmps_t_1024.

  CREATE DATA er_data LIKE <t_data>.
  ASSIGN er_data->* TO <t_data>.

  CONCATENATE
  'EntityType;Type;CrmNumber;Name;CompanyGroupId;Status;Street;Number;PoBox;PostalCode;City;CountryCode;Phone;Email;Identifier1Type;Identifier1Value;Identifier2Type;Identifier2Value;Identifier3Type;Identifier3Value;Identifier4Type;Identifier4Value;'
  'Identifier5Type;Identifier5Value;isTest'
  cl_abap_char_utilities=>cr_lf
  'Partner;CUSTOMER;22000;IDES France SA;1043;ACTIVE;31, rue des Erables;;1030;75015;Paris;FR;01 49 74 45 45-;test@ides.com;VAT;FR93341612695;CRMNB;22000;NAME;IDES France SA;;;;;FALSE'
  cl_abap_char_utilities=>cr_lf
    INTO ls_file.

  IF ii_number = 2.
    CONCATENATE
    ls_file
    'Partner;CUSTOMER;33000;IDES France SA 3;1043;DISABLED;33, rue des Erables;;1033;33333;Paris 3;FR;03 49 74 45 45-;test2@ides.com;VAT;FR93341612693;IBAN;DE005555512345678901;CRMNB;33000;NAME;IDES France SA 3;;;FALSE'
    cl_abap_char_utilities=>cr_lf
      INTO ls_file.
  ENDIF.

  CALL FUNCTION 'SCMS_STRING_TO_XSTRING'
    EXPORTING
      text   = ls_file
    IMPORTING
      buffer = lx_string
    EXCEPTIONS
      OTHERS = 1.
  CALL FUNCTION 'SCMS_XSTRING_TO_BINARY'
    EXPORTING
      buffer     = lx_string
    TABLES
      binary_tab = <t_data>.

ENDMETHOD.
METHOD create_get_vbrp.

  DATA: lst_vbrp TYPE vbrp.
  FIELD-SYMBOLS: <t_vbrp> TYPE zdyn_lvbrp.

  CREATE DATA er_vbrp TYPE zdyn_lvbrp.

  ASSIGN er_vbrp->* TO <t_vbrp>.

  lst_vbrp-mandt = '800'.
  lst_vbrp-vbeln = '0090039769'.
  lst_vbrp-posnr = '000010'.
  lst_vbrp-fkimg = '2.000'.
  lst_vbrp-vrkme = 'ST'.
  lst_vbrp-umvkz = '1'.
  lst_vbrp-umvkn = '1'.
  lst_vbrp-meins = 'ST'.
  lst_vbrp-fklmg = '2.000'.
  lst_vbrp-lmeng = '2.000'.
  lst_vbrp-ntgew = '6.000'.
  lst_vbrp-brgew = '6.000'.
  lst_vbrp-gewei = 'KG'.
  lst_vbrp-gsber = '9900'.
  lst_vbrp-prsdt = '20230109'.
  lst_vbrp-fbuda = '20230109'.
  lst_vbrp-kursk = '1.00000'.
  lst_vbrp-netwr = '0.00'.
  lst_vbrp-vbelv = '0000020200'.
  lst_vbrp-posnv = '000010'.
  lst_vbrp-vgbel = '0080018005'.
  lst_vbrp-vgpos = '000010'.
  lst_vbrp-vgtyp = 'J'.
  lst_vbrp-aubel = '0000020200'.
  lst_vbrp-aupos = '000010'.
  lst_vbrp-matnr = '100-100'.
  lst_vbrp-arktx = 'Casings'.
  lst_vbrp-matkl = '001'.
  lst_vbrp-pstyv = 'TAK'.
  lst_vbrp-prodh = '001000010500000115'.
  lst_vbrp-vstel = '1000'.
  lst_vbrp-pospa = '000010'.
  lst_vbrp-werks = '1049'.
  lst_vbrp-aland = 'DE'.
  lst_vbrp-wkreg = '06'.
  lst_vbrp-taxm1 = '1'.
  lst_vbrp-prsfd = 'X'.
  lst_vbrp-sktof = 'X'.
  lst_vbrp-vkgrp = '110'.
  lst_vbrp-vkbur = '1010'.
  lst_vbrp-ernam = 'ZARKIPI'.
  lst_vbrp-erdat = '20230109'.
  lst_vbrp-erzet = '125048'.
  lst_vbrp-lgort = '0001'.
  lst_vbrp-wavwr = '200.00'.
  lst_vbrp-stcur = '1.00000'.
  lst_vbrp-matwa = '100-100'.
  lst_vbrp-bonba = '0.00'.
  lst_vbrp-kokrs = '1000'.
  lst_vbrp-cmpnt = 'X'.
  lst_vbrp-bzirk_auft = '000001'.
  lst_vbrp-kdgrp_auft = '01'.
  lst_vbrp-lland_auft = 'DE'.
  lst_vbrp-regio_auft = '08'.
  lst_vbrp-vkorg_auft = '1049'.
  lst_vbrp-vtweg_auft = '10'.
  lst_vbrp-autyp = 'C'.

  APPEND lst_vbrp TO <t_vbrp>.

  lst_vbrp-posnr = '000020'.
  lst_vbrp-posnv = '000020'.
  lst_vbrp-vgpos = '000020'.
  lst_vbrp-aupos = '000020'.

  APPEND lst_vbrp TO <t_vbrp>.

  lst_vbrp-posnr = '000030'.
  lst_vbrp-posnv = '000030'.
  lst_vbrp-vgpos = '000030'.
  lst_vbrp-aupos = '000030'.

  APPEND lst_vbrp TO <t_vbrp>.

ENDMETHOD.
METHOD create_supplier_file_09.

  DATA: ls_file   TYPE string,
        lx_string TYPE xstring.
  FIELD-SYMBOLS: <t_data> TYPE rmps_t_1024.

  CREATE DATA er_data LIKE <t_data>.
  ASSIGN er_data->* TO <t_data>.

  CONCATENATE
  'EntityType;Type;CrmNumber;Name;CompanyGroupId;Status;Street;Number;PoBox;PostalCode;City;CountryCode;Phone;Email;Identifier1Type;Identifier1Value;Identifier2Type;Identifier2Value;Identifier3Type;Identifier3Value;Identifier4Type;Identifier4Value;'
  'Identifier5Type;Identifier5Value;isTest'
  cl_abap_char_utilities=>cr_lf
  'Partner;SUPPLIER;43001;OMV AG;1043;ACTIVE;Rennbahnstrasse 6;;;1020;Wien;AT;;test@omv.at;VAT;ATU99999993;IBAN;AT981910088877766655;IBAN;AT421910098765454321;CRMNB;43001;NAME;OMV AG;FALSE'
  cl_abap_char_utilities=>cr_lf
    INTO ls_file.

  IF ii_number = 2.
    CONCATENATE
    ls_file
    'Partner;SUPPLIER;44001;Deutsch AG;1043;DISABLED;Warschauerstrasse 2;;;1111;Berlin;DE;;test@deutsch.de;VAT;DEU99999992;IBAN;DE985555512345678901;CRMNB;44001;NAME;Deutsch AG;;;FALSE'
    cl_abap_char_utilities=>cr_lf
      INTO ls_file.
  ENDIF.

  CALL FUNCTION 'SCMS_STRING_TO_XSTRING'
    EXPORTING
      text   = ls_file
    IMPORTING
      buffer = lx_string
    EXCEPTIONS
      OTHERS = 1.
  CALL FUNCTION 'SCMS_XSTRING_TO_BINARY'
    EXPORTING
      buffer     = lx_string
    TABLES
      binary_tab = <t_data>.

ENDMETHOD.
METHOD GET_BILL_DOC_STRUCT_01.

  DATA: lst_hd_adr       TYPE LINE OF lbbil_invoice-hd_adr,
        lst_hd_part_add  TYPE LINE OF lbbil_invoice-hd_part_add,
        lst_hd_card      TYPE LINE OF lbbil_invoice-hd_card,
        lst_hd_pay       TYPE LINE OF lbbil_invoice-hd_pay,
        lst_hd_kond      TYPE LINE OF lbbil_invoice-hd_kond,
        lst_hd_fin       TYPE LINE OF lbbil_invoice-hd_fin,
        lst_hd_tech      TYPE LINE OF lbbil_invoice-hd_tech,
        lst_hd_downpay   TYPE LINE OF lbbil_invoice-hd_downpay,
        lst_it_gen       TYPE LINE OF lbbil_invoice-it_gen,
        lst_it_adr       TYPE LINE OF lbbil_invoice-it_adr,
        lst_it_price     TYPE LINE OF lbbil_invoice-it_price,
        lst_it_kond      TYPE LINE OF lbbil_invoice-it_kond,
        lst_it_ref       TYPE LINE OF lbbil_invoice-it_ref,
        lst_it_refdlv    TYPE LINE OF lbbil_invoice-it_refdlv,
        lst_it_reford    TYPE LINE OF lbbil_invoice-it_reford,
        lst_it_refpurord TYPE LINE OF lbbil_invoice-it_refpurord,
        lst_it_refvag    TYPE LINE OF lbbil_invoice-it_refvag,
        lst_it_refvg2    TYPE LINE OF lbbil_invoice-it_refvg2,
        lst_it_refvkt    TYPE LINE OF lbbil_invoice-it_refvkt,
        lst_it_tech      TYPE LINE OF lbbil_invoice-it_tech,
        lst_it_fin       TYPE LINE OF lbbil_invoice-it_fin,
        lst_it_confitm   TYPE LINE OF lbbil_invoice-it_confitm,
        lst_it_confbatch TYPE LINE OF lbbil_invoice-it_confbatch.

  FIELD-SYMBOLS: <st_doc> TYPE lbbil_invoice.

  CREATE DATA er_doc LIKE <st_doc>.
  ASSIGN er_doc->* TO <st_doc>.


  <st_doc>-hd_gen-bil_number = '0090039774'.
  <st_doc>-hd_gen-sold_to_party = '0000049001'.
  <st_doc>-hd_gen-payer = '0000049001'.
  <st_doc>-hd_gen-t001_vat = 'DE345740205'.
  <st_doc>-hd_gen-incoterms1 = 'EXW'.
  <st_doc>-hd_gen-incoterms2 = 'Frankfurt'.
  <st_doc>-hd_gen-terms_paym = '0001'.
  <st_doc>-hd_gen-bil_waerk = 'EUR'.
  <st_doc>-hd_gen-bil_netwr = '4300.0'.
  <st_doc>-hd_gen-bil_disc = '5117.0'.
  <st_doc>-hd_gen-bil_tax = '817.0'.
  <st_doc>-hd_gen-bil_vbtype = 'M'.
  <st_doc>-hd_gen-bil_cat = 'L'.
  <st_doc>-hd_gen-bil_type = 'F2'.
  <st_doc>-hd_gen-bil_date = '2022-11-08'.
  <st_doc>-hd_gen-brt_weight = '667.5'.
  <st_doc>-hd_gen-net_weight = '467.5'.
  <st_doc>-hd_gen-unit_of_weight = 'KG'.
  <st_doc>-hd_gen-bil_edate = '2022-11-08'.
  <st_doc>-hd_gen-bil_ename = 'ZARKIPI'.
  <st_doc>-hd_gen-bil_schema = 'RVAA01'.
  <st_doc>-hd_gen-kond_numb = '0000092780'.
  <st_doc>-hd_gen-il_type = 'LR'.
  <st_doc>-hd_gen-dlv_land = 'DE'.
  <st_doc>-hd_gen-landtx = 'DE'.
  <st_doc>-hd_gen-kidno = '0090039774'.
  <st_doc>-hd_gen-xegld_l1 = 'X'.
  <st_doc>-hd_gen-xegld_co = 'X'.
  <st_doc>-hd_gen-dpend = '5117.0'.
  <st_doc>-hd_gen-dpmws_end = '817.0'.

  <st_doc>-hd_gen_descript-bil_number = '0090039774'.
  <st_doc>-hd_gen_descript-name_incoterms1 = 'From plant'.
  <st_doc>-hd_gen_descript-name_paymterm = 'Special Payment Terms 0001'.
  <st_doc>-hd_gen_descript-name_pterms1 = 'Up to 08.11.2022 without deduction'.
  <st_doc>-hd_gen_descript-zfbdt = '2022-11-08'.

  <st_doc>-hd_org-bil_number = '0090039774'.
  <st_doc>-hd_org-salesorg = '1049'.
  <st_doc>-hd_org-salesorg_adr = '0000730181'.
  <st_doc>-hd_org-salesorg_spras = 'D'.
  <st_doc>-hd_org-distrb_channel = '10'.
  <st_doc>-hd_org-division = '00'.
  <st_doc>-hd_org-comp_code = '1049'.

  <st_doc>-hd_ref-bil_number = '0090039774'.
  <st_doc>-hd_ref-deliv_numb = '0080018011'.
  <st_doc>-hd_ref-deliv_date = '2022-11-17'.
  <st_doc>-hd_ref-deliv_ledat = '2022-11-08'.
  <st_doc>-hd_ref-order_numb = '0000020210'.
  <st_doc>-hd_ref-order_date = '2022-11-08'.
  <st_doc>-hd_ref-purch_no = 'PZ_006'.
  <st_doc>-hd_ref-purch_no_c = 'PZ_006'.

  <st_doc>-hd_komk-bil_number = '0090039774'.
  <st_doc>-hd_komk-supos = '4300.0'.
  <st_doc>-hd_komk-fkwrt = '5117.0'.
  <st_doc>-hd_komk-waerk = 'EUR'.
*  <st_doc>-hd_komk-kurrf = '1.0'.

* HD_ADR
  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'AG'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'RE'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'RG'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

  lst_hd_adr-bil_number = '0090039774'.
  lst_hd_adr-partn_role = 'WE'.
  lst_hd_adr-partn_numb = '0000049001'.
  lst_hd_adr-addr_no = '0000730182'.
  lst_hd_adr-addr_flag = 'D'.
  lst_hd_adr-bil_item = '000010'.
  APPEND lst_hd_adr TO <st_doc>-hd_adr.

* HD_PART_BIL
  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'AG'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'RE'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-partn_role = 'RG'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

  lst_hd_part_add-bil_number = '0090039774'.
  lst_hd_part_add-bil_item = '000010'.
  lst_hd_part_add-partn_role = 'WE'.
  lst_hd_part_add-partn_numb = '0000049001'.
  APPEND lst_hd_part_add TO <st_doc>-hd_part_add.

* HD_KOND
  lst_hd_kond-bil_number = '0090039774'.
  lst_hd_kond-stunr = '915'.
  lst_hd_kond-zaehk = '11'.
  lst_hd_kond-kappl = 'V'.
  lst_hd_kond-kschl = 'MWST'.
  lst_hd_kond-krech = 'A'.
  lst_hd_kond-kawrt = '4300.0'.
  lst_hd_kond-awein = 'EUR'.
  lst_hd_kond-awei1 = 'EUR'.
  lst_hd_kond-kbetr = '190.0'.
  lst_hd_kond-koein = '%'.
  lst_hd_kond-koei1 = '3'.
  lst_hd_kond-kntyp = 'D'.
  lst_hd_kond-kherk = 'E'.
  lst_hd_kond-kwert = '817.0'.
  lst_hd_kond-ksteu = 'A'.
  lst_hd_kond-koaid = 'D'.
  lst_hd_kond-drukz = 'S'.
  lst_hd_kond-vtext = 'Output Tax'.
  lst_hd_kond-mwskz = 'A1'.
  APPEND lst_hd_kond TO <st_doc>-hd_kond.

* HD_FIN
  lst_hd_fin-bil_number = '0090039774'.
  lst_hd_fin-bil_number = 'GAWRD>FÜNFTAUSENDEINHUNDERTSIEBZEHN EUR NULL'.
  lst_hd_fin-bil_number = 'WADAT_IST_LF>2022-11-08'.
  APPEND lst_hd_fin TO <st_doc>-hd_fin.

* IT_GEN
  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000010'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-100'.
  lst_it_gen-mat_entrd = '100-100'.
  lst_it_gen-short_text = 'Casings'.
  lst_it_gen-fkimg = '10.0'.
  lst_it_gen-sales_unit = 'ST'.
  lst_it_gen-inv_qty_stock = '10.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '30.0'.
  lst_it_gen-gross_wt = '30.0'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '1'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000020'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-200'.
  lst_it_gen-mat_entrd = '100-200'.
  lst_it_gen-short_text = 'Actuation'.
  lst_it_gen-fkimg = '15.0'.
  lst_it_gen-sales_unit = 'ST'.
  lst_it_gen-inv_qty_stock = '15.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '37.5'.
  lst_it_gen-gross_wt = '37.5'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '1'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

  lst_it_gen-bil_number = '0090039774'.
  lst_it_gen-itm_number = '000030'.
  lst_it_gen-pospa = '000010'.
  lst_it_gen-material = '100-300'.
  lst_it_gen-mat_entrd = '100-300'.
  lst_it_gen-short_text = 'Casings'.
  lst_it_gen-fkimg = '1.0'.
  lst_it_gen-sales_unit = 'PAL'.
  lst_it_gen-inv_qty_stock = '200.0'.
  lst_it_gen-base_uom = 'ST'.
  lst_it_gen-net_weight = '400.0'.
  lst_it_gen-gross_wt = '600.0'.
  lst_it_gen-unit_of_wt = 'KG'.
  lst_it_gen-volume = '0.0'.
  lst_it_gen-item_categ = 'TAK'.
  lst_it_gen-sales_qty_denom = '1'.
  lst_it_gen-sales_qty_num = '200'.
  lst_it_gen-uecha = '000000'.
  lst_it_gen-cuobj = '000000000000000000'.
  lst_it_gen-cuobj_ch = '000000000000000000'.
  lst_it_gen-uepos = '000000'.
  lst_it_gen-pric_date = '2022-11-08'.
  lst_it_gen-erdat = '2022-11-08'.
  lst_it_gen-fbuda = '2022-11-08'.
  lst_it_gen-sales_off = '1010'.
  lst_it_gen-fpltr = '000000'.
  APPEND lst_it_gen TO <st_doc>-it_gen.

* IT_PRICE
  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000010'.
  lst_it_price-kzwi1 = '1000.0'.
  lst_it_price-kzwi2 = '1000.0'.
  lst_it_price-kzwi3 = '1000.0'.
  lst_it_price-netwr = '1000.0'.
  lst_it_price-mwsbp = '190.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000020'.
  lst_it_price-kzwi1 = '3000.0'.
  lst_it_price-kzwi2 = '3000.0'.
  lst_it_price-kzwi3 = '3000.0'.
  lst_it_price-netwr = '3000.0'.
  lst_it_price-mwsbp = '570.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

  lst_it_price-bil_number = '0090039774'.
  lst_it_price-itm_number = '000030'.
  lst_it_price-kzwi1 = '300.0'.
  lst_it_price-kzwi2 = '300.0'.
  lst_it_price-kzwi3 = '300.0'.
  lst_it_price-netwr = '300.0'.
  lst_it_price-mwsbp = '57.0'.
  APPEND lst_it_price TO <st_doc>-it_price.

* IT_KOND
  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000010'.
  lst_it_kond-kposn = '000010'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '100.0'.
  lst_it_kond-awein = 'ST'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '100.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'ST'.
  lst_it_kond-kumza = '1'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '1000.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000020'.
  lst_it_kond-kposn = '000020'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '150.0'.
  lst_it_kond-awein = 'ST'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '200.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'ST'.
  lst_it_kond-kumza = '1'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '3000.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

  lst_it_kond-bil_number = '0090039774'.
  lst_it_kond-itm_number = '000030'.
  lst_it_kond-kposn = '000030'.
  lst_it_kond-stunr = '100'.
  lst_it_kond-zaehk = '01'.
  lst_it_kond-kappl = 'V'.
  lst_it_kond-krech = 'C'.
  lst_it_kond-kawrt = '10.0'.
  lst_it_kond-awein = 'PAL'.
  lst_it_kond-awei1 = '3'.
  lst_it_kond-kbetr = '300.0'.
  lst_it_kond-koein = 'EUR'.
  lst_it_kond-koei1 = 'EUR'.
  lst_it_kond-kkurs = '1.0'.
  lst_it_kond-kpein = '1'.
  lst_it_kond-kmein = 'PAL'.
  lst_it_kond-kumza = '200'.
  lst_it_kond-kumne = '1'.
  lst_it_kond-kwert = '300.0'.
  lst_it_kond-drukz = 'X'.
  lst_it_kond-vtext = 'Gross Value'.
  APPEND lst_it_kond TO <st_doc>-it_kond.

* IT_REF
  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000010'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000010'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000020'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000020'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

  lst_it_ref-bil_number = '0090039774'.
  lst_it_ref-itm_number = '000030'.
  lst_it_ref-ref_doc = '0080018011'.
  lst_it_ref-ref_doc_it = '000030'.
  lst_it_ref-ref_doc_type = 'J'.
  APPEND lst_it_ref TO <st_doc>-it_ref.

* IT_REFDLV
  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000010'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000010'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000020'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000020'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

  lst_it_refdlv-bil_number = '0090039774'.
  lst_it_refdlv-itm_number = '000030'.
  lst_it_refdlv-deliv_numb = '0080018011'.
  lst_it_refdlv-itm_number_dlv = '000030'.
  lst_it_refdlv-deliv_date = '2022-11-17'.
  lst_it_refdlv-deliv_cr_date = '2022-11-08'.
  APPEND lst_it_refdlv TO <st_doc>-it_refdlv.

* IT_REFPURORD
  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000010'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000020'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

  lst_it_refpurord-bil_number = '0090039774'.
  lst_it_refpurord-itm_number = '000030'.
  lst_it_refpurord-purch_no_c = 'PZ_006'.
  APPEND lst_it_refpurord TO <st_doc>-it_refpurord.

* IT_FIN
  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000010'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000020'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

  lst_it_fin-bil_number = '0090039774'.
  lst_it_fin-itm_number = '000030'.
  APPEND lst_it_fin TO <st_doc>-it_fin.

ENDMETHOD.
METHOD get_sc_bill_doc_created_01.

**************************************************************************************************
* Scenario: Billing document created
* Version: 01

**************************************************************************************************

  DATA: lr_vbrp     TYPE REF TO data,

        lt_scenario LIKE mst_scenario-scenario,
        lst_val     LIKE LINE OF lt_scenario,
        ls_value    LIKE lst_val-value,
        ls_date     TYPE string.

**************************************************************************************************
**************************************************************************************************

  create_get_vbrp( IMPORTING er_vbrp = lr_vbrp ).

**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_VBRP' 'IC_DOC_NUMBER' '0090039769'.
  add_method     lt_scenario 1 'GET_VBRP' 'IC_ITM_NUMBER' '000010'.
  add_method_ref lt_scenario 1 'GET_VBRP' 'EST_VBRP'   lr_vbrp.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_CUSTOMER_TO_ROUTTYAP_09.

**************************************************************************************************
* Scenario: Customer is transferred from SAP to Routty
* Version: 10, one company code, two customers
* one is blocked, full update with inactive customers skipped

**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_customers      TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_customers> TYPE zdyn_lstr_cmd,
                 <st_customer> LIKE LINE OF <t_customers>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_customers( EXPORTING ii_num_of_comp_codes = 1
                                  ii_num_of_customers  = 2
                        IMPORTING er_sel_opt           = lr_sel_opt
                                  er_customers         = lr_customers ).
  ASSIGN lr_customers->* TO <t_customers>.
* Let customer 33000 be blocked for posting
  READ TABLE <t_customers> WITH KEY kunnr = '0000033000' ASSIGNING <st_customer>.
  <st_customer>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_customer_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_customer_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_customer_file_09( EXPORTING ii_number = 1
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_CUSTOMERS' '' ''.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_OPT'   lr_sel_opt.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'ET_CUSTOMERS' lr_customers.

* customer 22000
  add_method     lt_scenario 2 'GET_CUSTOMER_BANKS' '' ''.
  add_method     lt_scenario 0 'GET_CUSTOMER_BANKS' 'IC_CUSTOMER' '0000022000'.
  add_method_ref lt_scenario 0 'GET_CUSTOMER_BANKS' 'ET_BANKS'    lr_banks_01.

  add_method lt_scenario 3 'GET_IBAN' '' ''.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKN' '21346541'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_IBAN' 'EC_IBAN'  ''.

  add_method lt_scenario 4 'GET_SWIFT' '' ''.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 5 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000006841'.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@ides.com'.

* File
  add_method     lt_scenario 6 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 0 'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 0 'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 0 'STORE_FILE_ON_CLIENT' 'II_LENGTH'   468.
  add_method_ref lt_scenario 0 'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 0 'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_CUSTOMER_TO_ROUTTYAP_10.

**************************************************************************************************
* Scenario: Customer is transferred from SAP to Routty
* Version: 10, one company code, two customers
* one is blocked, full update with inactive customers taken

**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_customers      TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_customers> TYPE zdyn_lstr_cmd,
                 <st_customer> LIKE LINE OF <t_customers>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_customers( EXPORTING ii_num_of_comp_codes = 1
                                  ii_num_of_customers  = 2
                        IMPORTING er_sel_opt           = lr_sel_opt
                                  er_customers         = lr_customers ).
  ASSIGN lr_customers->* TO <t_customers>.
* Let customer 33000 be blocked for posting
  READ TABLE <t_customers> WITH KEY kunnr = '0000033000' ASSIGNING <st_customer>.
  <st_customer>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_customer_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_customer_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_customer_file_09( EXPORTING ii_number = 2
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_CUSTOMERS' '' ''.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_OPT'   lr_sel_opt.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'ET_CUSTOMERS' lr_customers.

* customer 22000
  add_method     lt_scenario 2 'GET_CUSTOMER_BANKS' '' ''.
  add_method     lt_scenario 0 'GET_CUSTOMER_BANKS' 'IC_CUSTOMER' '0000022000'.
  add_method_ref lt_scenario 0 'GET_CUSTOMER_BANKS' 'ET_BANKS'    lr_banks_01.

  add_method lt_scenario 3 'GET_IBAN' '' ''.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKN' '21346541'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_IBAN' 'EC_IBAN'  ''.

  add_method lt_scenario 4 'GET_SWIFT' '' ''.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 5 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000006841'.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@ides.com'.

* customer 33000
  add_method     lt_scenario 6 'GET_CUSTOMER_BANKS' '' ''.
  add_method     lt_scenario 0 'GET_CUSTOMER_BANKS' 'IC_CUSTOMER' '0000033000'.
  add_method_ref lt_scenario 0 'GET_CUSTOMER_BANKS' 'ET_BANKS'    lr_banks_02.

  add_method lt_scenario 7 'GET_IBAN' '' ''.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKL' '55555'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKN' '12345678901'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_IBAN' 'EC_IBAN'  'DE005555512345678901'.

  add_method lt_scenario 8 'GET_SWIFT' '' ''.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKL' '55555'.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 9 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000006843'.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test2@ides.com'.

* File
  add_method     lt_scenario 10 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'II_LENGTH'   683.
  add_method_ref lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_CUSTOMER_TO_ROUTTYAP_11.

**************************************************************************************************
* Scenario: Customer is transferred from SAP to Routty
* Version: 11, one company code, two customers
* one is blocked, incremental (modification date provided), inactive customers taken

**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_customers      TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_customers> TYPE zdyn_lstr_cmd,
                 <st_customer> LIKE LINE OF <t_customers>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_customers( EXPORTING ii_num_of_comp_codes = 1
                                  ii_num_of_customers  = 2
                        IMPORTING er_sel_opt           = lr_sel_opt
                                  er_customers         = lr_customers ).
  ASSIGN lr_customers->* TO <t_customers>.
* Let customer 33000 be blocked for posting
  READ TABLE <t_customers> WITH KEY kunnr = '0000033000' ASSIGNING <st_customer>.
  <st_customer>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_customer_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_customer_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_customer_file_09( EXPORTING ii_number = 2
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_CUSTOMERS' '' ''.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_OPT'   lr_sel_opt.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 0 'GET_CUSTOMERS' 'ET_CUSTOMERS' lr_customers.

* customer 22000
  add_method lt_scenario 2 'IS_OBJECT_MODIFIED' '' ''.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'IC_OBJECT_ID'    '0000022000'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'IC_OBJECT_CLASS' 'DEBI'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'ID_DATE'         '19990101'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'RB_RESULT'     'X'.

  add_method     lt_scenario 3 'GET_CUSTOMER_BANKS' '' ''.
  add_method     lt_scenario 0 'GET_CUSTOMER_BANKS' 'IC_CUSTOMER' '0000022000'.
  add_method_ref lt_scenario 0 'GET_CUSTOMER_BANKS' 'ET_BANKS'    lr_banks_01.

  add_method lt_scenario 4 'GET_IBAN' '' ''.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKN' '21346541'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_IBAN' 'EC_IBAN'  ''.

  add_method lt_scenario 5 'GET_SWIFT' '' ''.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKL' '25012345'.
  add_method lt_scenario 0 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 6 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000006841'.
  add_method lt_scenario 0 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@ides.com'.

* customer 33000
  add_method lt_scenario 7 'IS_OBJECT_MODIFIED' '' ''.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'IC_OBJECT_ID'    '0000033000'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'IC_OBJECT_CLASS' 'DEBI'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'ID_DATE'         '19990101'.
  add_method lt_scenario 0 'IS_OBJECT_MODIFIED' 'RB_RESULT'       'X'.

  add_method     lt_scenario 8 'GET_CUSTOMER_BANKS' '' ''.
  add_method     lt_scenario 0 'GET_CUSTOMER_BANKS' 'IC_CUSTOMER' '0000033000'.
  add_method_ref lt_scenario 0 'GET_CUSTOMER_BANKS' 'ET_BANKS'    lr_banks_02.

  add_method lt_scenario 9 'GET_IBAN' '' ''.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKL' '55555'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKN' '12345678901'.
  add_method lt_scenario 0 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0 'GET_IBAN' 'EC_IBAN'  'DE005555512345678901'.

  add_method lt_scenario 10 'GET_SWIFT' '' ''.
  add_method lt_scenario 0  'GET_SWIFT' 'IC_BANKL' '55555'.
  add_method lt_scenario 0  'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 0  'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 11 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 0  'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000006843'.
  add_method lt_scenario 0  'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test2@ides.com'.

* File
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'II_LENGTH'   683.
  add_method_ref lt_scenario 0  'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 0  'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD get_sc_routtyexp_iv_to_pd_01.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty Express to PD
* Version: 01

**************************************************************************************************

  DATA: lr_rfc_extdata   TYPE REF TO data,
        lr_rfc_archiving TYPE REF TO data,
        lr_rfc_content   TYPE REF TO data,
        lr_rfc_bo_hdr    TYPE REF TO data,
        lr_rfc_status    TYPE REF TO data,
        lr_rfc_messages  TYPE REF TO data,

        lt_scenario      LIKE mst_scenario-scenario,
        lst_val          LIKE LINE OF lt_scenario,
        ls_value         LIKE lst_val-value,
        ls_date          TYPE string.


**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD

  create_rfc_data_submit_data_mm( EXPORTING ib_express       = abap_true
                                  IMPORTING er_rfc_extdata   = lr_rfc_extdata
                                            er_rfc_archiving = lr_rfc_archiving
                                            er_rfc_content   = lr_rfc_content
                                            er_rfc_bo_hdr    = lr_rfc_bo_hdr
                                            er_rfc_status    = lr_rfc_status
                                            er_rfc_messages  = lr_rfc_messages ).


**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  CONCATENATE
  '<PurchaseInvoice>  <PurchaseInvoiceData>    <DocumentSet>      <Id>66</Id>      <DocumentId>IV_4500022682_1</DocumentId>      <Guid>41babc06-9205-4ea7-ae84-3faf8860c70e</Guid'
  '>      <DocumentTypeId p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance"/>    </DocumentSet>    <PurchaseInvoiceHeader>      <Supplier>        <Metadata>          <Number>43001</Number>          <Site'
  'Code />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>OMV AG</Name1>          <Name2 />          <Address1>Rennbahnstrasse 61</Address1>          <Address2 />'
  '          <PoBox />          <PostalCode>1020</PostalCode>          <City>Wien</City>          <State />          <Location />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynat'
  'os.be</EmailAddress>          <PaymentTerms>0001</PaymentTerms>          <PaymentMethod>AKLOSU</PaymentMethod>          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimen'
  'sion5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>              <Number>ATU99999993</Number>              <Scheme>VAT</'
  'Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankNumber>19100</BankNumber>              <AccountNumber>98765454321<'
  '/AccountNumber>              <IBAN>AT421910098765454321</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              <Di'
  'mension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>   </Currency>      '
  '        <Dimension1 />              <Dimension2 />              <Dimension3 />              <Dimension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber>19100</BankNumber>           '
  '   <AccountNumber>88877766655</AccountNumber>              <IBAN>AT981910088877766655</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dime'
  'nsion3 />              <Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Partner</Name>        </Type>        <Active>true</Active>      </S'
  'upplier>      <Buyer>        <Metadata>          <Number>1043</Number>          <SiteCode />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>Dynatos Ãsterreich'
  ' GmbH</Name1>          <Name2 />          <Address1>Heugasse 1</Address1>          <Address2 />          <PoBox />          <PostalCode>1121</PostalCode>          <City>Wien</City>          <State />          <Location'
  ' />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynatos.be</EmailAddress>          <PaymentTerms />          <PaymentMethod />          <Dimension1 />          <Dimension2 />'
  '          <Dimension3 />          <Dimension4 />          <Dimension5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>'
  '              <Number>ABC123</Number>              <Scheme>VAT</Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankN'
  'umber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              '
  '<Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Company</Name>        </Type>        <Active>true</Active>      </Buyer>      <DocumentRec'
  'eiver>        <Id>0</Id>        <Number>43001</Number>        <VatNumber>ATU99999993</VatNumber>        <Name>OMV AG</Name>        <Street>Rennbahnstrasse 61</Street>        <PostalCode>1020</PostalCode>        <City>Wien<'
  '/City>        <Country>AT</Country>        <ExternalUniqueId>1043</ExternalUniqueId>      </DocumentReceiver>      <DocumentSupplier>        <Id>0</Id>        <Number>1043</Number>        <Name>Dynatos Ãsterreich GmbH</Na'
  'me>        <RegistrationNumber1>ABC123</RegistrationNumber1>        <Street>Heugasse 1</Street>        <PostalCode>1121</PostalCode>        <City>Wien</City>        <Country>AT</Country>        <CorporateGroupID>1043</Corporat'
  'eGroupID>      </DocumentSupplier>      <Id>56</Id>      <DocumentReference>IV_4500022682_1</DocumentReference>      <OrderReference>4500022682</OrderReference>      <ReceiptReference />      <DocumentDate>2022-02-21T00:00:00<'
  '/DocumentDate>      <PaymentReference />      <PaymentTerms />      <DocumentType>Invoice</DocumentType>      <DocumentSubType>PO</DocumentSubType>      <Currency>EUR</Currency>      <CurrencyRate p4:nil="true" xmlns:p4="ht'
  'tp://www.w3.org/2001/XMLSchema-instance" />      <TotalNetAmount>8000.00</TotalNetAmount>      <TotalVatAmount>1520.00</TotalVatAmount>      <TotalGrossAmount>9520.00</TotalGrossAmount>      <TotalDiscountAmount>0.00</TotalDiscountAm'
  'ount>      <DocumentReceiversNumber>43001</DocumentReceiversNumber>      <DocumentReceiversName>OMV AG</DocumentReceiversName>      <DocumentReceiversRegistrationNumber1>ATU99999993</DocumentReceiversRegistrationNumber1>      <Documen'
  'tReceiversIban>AT421910098765454321</DocumentReceiversIban>      <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>      <DocumentSuppliersName>Dynatos ?sterreich GmbH</DocumentSuppliersName>      <DocumentSuppliersRegistrationNumber'
  '1>ABC123</DocumentSuppliersRegistrationNumber1>      <VatRate1>NaN</VatRate1>      <VatRate2 />      <VatRate3 />      <VatRate4 />      <VatRate5 />      <HeaderText1 />      <HeaderText2 />      <ReceptionDate>2022-0'
  '2-21T00:00:00</ReceptionDate>      <BookingNumber>0</BookingNumber>      <BookingDate>2022-02-28T00:00:00</BookingDate>      <BookingYear>2022</BookingYear>      <BookingMonth>2</BookingMonth>      <DocumentSetId>66</DocumentSetId'
  '>      <DocumentRawId>166</DocumentRawId>      <Dimension1 />      <Dimension2 />      <Dimension3 />      <Dimension4 />      <Dimension5 />      <Dimension6 />      <Dimension7 />      <Dimension8 />      <Va'
  'tSystem>S</VatSystem>      <SupplierNumber>43001</SupplierNumber>      <SupplierName>OMV AG</SupplierName>      <SupplierRegistrationNumber>ATU99999993</SupplierRegistrationNumber>      <SupplierIban>AT421910098765454321</SupplierIban'
  '>      <BuyerNumber>1043</BuyerNumber>      <BuyerName>Dynatos ?sterreich GmbH</BuyerName>      <BuyerRegistrationNumber>ABC123</BuyerRegistrationNumber>    </PurchaseInvoiceHeader>    <PurchaseInvoiceLines>      <PurchaseInvo'
  'iceLine>        <LineId>1</LineId>        <ArticleNumberSupplier />        <ArticleNumberBuyer />        <ArticleDescription>Casings</ArticleDescription>        <StandardArticleNumber />        <Quantity>100.000000</Quantity>'
  '        <UnitCode>H87</UnitCode>        <Price>80.000000</Price>        <LineAmount>8000.000000</LineAmount>        <Status>Matched</Status>        <PurchaseInvoiceHeaderId>56</PurchaseInvoiceHeaderId>        <OrderReference>45'
  '00022682</OrderReference>        <OrderLineId>4500022682</OrderLineId>        <ReceiptReference />        <ReceiptLineId />        <Dimension1 />        <Dimension2 />        <Dimension3 />        <Dimension4 />       '
  ' <Dimension5 />        <Dimension6 />        <Dimension7 />        <Dimension8 />        <VatAmount>1520.000000</VatAmount>        <VatRate>19.0000</VatRate>        <PurchaseOrderLinesId>10784</PurchaseOrderLinesId>       '
  ' <EanCode />      </PurchaseInvoiceLine>    </PurchaseInvoiceLines>    <PurchaseInvoiceCodingLines>      <PurchaseInvoiceCodingLine>        <GlAccount>400000</GlAccount>        <CostCenter>1043</CostCenter>        <DebitAm'
  'ount>8000.00</DebitAmount>        <VatAmount>1520.00</VatAmount>        <VatRate>19.000000000000000000</VatRate>        <VatCode>VA</VatCode>        <VatSystem>S</VatSystem>        <Status>POLine</Status>        <HeaderId>56</'
  'HeaderId>        <PurchaseInvoiceLinesId>149</PurchaseInvoiceLinesId>      </PurchaseInvoiceCodingLine>    </PurchaseInvoiceCodingLines>    <PurchaseInvoiceIntrastatLines />    <PurchaseInvoicePaymentScheduleLines />    <Match'
  'ingExceptions />    <ArchiveLinks>      <Link>X2PaQk6QaOlqtJGsFTIt1g==</Link>      <Link>TooELfAdWi1JVO+OyCOzyg==</Link>    </ArchiveLinks>    <Attachments>      <Attachment>        <Filename>Base_41babc06-9205-4ea7-ae84-3'
  'faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBCYXNlIGF0dGFjaG1lbnQ=</Data>        <MimeType>text/xml</MimeType>        <Type>Base Document</Type>      '
  '</Attachment>      <Attachment>        <Filename>41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf</Filename>        <Data>VGhpcyBpcyBnZW5lcmF0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>application/pdf</MimeType>         <Type>'
  'Sales Invoice</Type>      </Attachment>      <Attachment>        <Filename>Converted_41babc06-9205-4ea7-ae84-3faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBDb252ZXJ0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeT'
  'ype>        <Type>Converted Document</Type>      </Attachment>      <Attachment>        <Filename>AccountingDocument_41babc06-9205-4ea7-ae84-3faf8860c70e_2022-02-21_11-20-34-777.xml</Filename>        '
  '<Data>VGhpcyBpcyBBY2NvdW50aW5nRG9jdW1lbnQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeType>        <Type>Attachment</T'
  'ype>      </Attachment>    </Attachments>  </PurchaseInvoiceData>  <PurchaseOrderMasterDataList>    <PurchaseOrderMasterData>      <PurchaseOrderHeader>        <DocumentReference>4500022682</DocumentReference>        <'
  'ExtraReference />        <DocumentDate>2022-02-21T00:00:00</DocumentDate>        <DocumentType>NB</DocumentType>        <DocumentSubType />        <Currency>EUR</Currency>        <TotalNetAmount>8000.00</TotalNetAmount>       '
  ' <TotalVatAmount>0.00</TotalVatAmount>        <TotalGrossAmount>8000.00</TotalGrossAmount>        <TotalDiscountAmount>0.00</TotalDiscountAmount>        <OrderReference />        <DocumentReceiversNumber>43001</DocumentReceiversNumber'
  '>        <DocumentReceiversName>OMV AG</DocumentReceiversName>        <DocumentReceiversRegistrationNumber1 />        <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>        <DocumentSuppliersName />        <HeaderText1 />'
  '        <HeaderText2 />        <DocumentStatus>Open</DocumentStatus>        <RequesterId />        <SuppliersName>OMV AG</SuppliersName>        <SupplierName>OMV AG</SupplierName>        <SuppliersNumber>43001</SuppliersNumber>'
  '        <SupplierNumber>43001</SupplierNumber>        <SuppliersRegistrationNumber />        <SupplierRegistrationNumber />        <BuyerName />        <BuyerNumber>1043</BuyerNumber>        <ReceiversName />        <Recei'
  'verName />        <ReceiversNumber>1043</ReceiversNumber>        <ReceiverNumber>1043</ReceiverNumber>      </PurchaseOrderHeader>      <PurchaseOrderLines>        <PurchaseOrderLine>          <Id>10784</Id>          <Line'
  'Id>10</LineId>          <ExtraReference>4500022682</ExtraReference>          <ArticleNumberSupplier />          <ArticleNumberBuyer>100-100</ArticleNumberBuyer>          <ArticleDescription>Casings</ArticleDescription>          <S'
  'tandardArticleNumber />          <Quantity>100.000000</Quantity>          <UnitCode>ST</UnitCode>          <Price>80.000000</Price>          <DiscountAmount>0.000000</DiscountAmount>          <LineAmount>8000.000000</LineAmount>'
  '          <Status />          <GlAccount />          <CostCenter />          <VatCode />          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimension5 />    '
  '      <Dimension6 />          <Dimension7 />          <Dimension8 />          <StartDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />          <EndDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XML'
  'Schema-instance" />          <InvoicedQuantity>0.000000</InvoicedQuantity>          <InvoicedAmount>0.000000</InvoicedAmount>        </PurchaseOrderLine>      </PurchaseOrderLines>    </PurchaseOrderMasterData>  </PurchaseOrd'
  'erMasterDataList></PurchaseInvoice>' INTO ls_value.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_RESULT' ls_value.

  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' '' ''.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_OBJ'       'IV'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_ENV'       'XB'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_MAPID'     'ROUTTY'.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_EXTDATA'   lr_rfc_extdata.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_ARCHIVING' lr_rfc_archiving.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_CONTENT'   lr_rfc_content.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_BO_HDR'    lr_rfc_bo_hdr.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_STATUS'    lr_rfc_status.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ET_MESSAGES'  lr_rfc_messages.

  add_method lt_scenario 5 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 5 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 6 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 7 'CALL_HTTP' '' ''.
  add_method lt_scenario 7 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_INPUT'       '{"successful":true,"errorcode":"","errormessage":""}'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 7 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  add_method lt_scenario 8 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 8 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method lt_scenario 9 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 10 'CALL_HTTP' '' ''.
  add_method lt_scenario 10 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_INPUT'       '{"status":"OK","code":"Processed","message":"Document transferred from ROUTTY 41BABC0692054EA7AE843FAF8860C70E to PDAP 3010"}'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 10 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_ROUTTYEXP_IV_TO_PD_03.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty Express to IDOC
* Version: 03

**************************************************************************************************

  DATA: lr_control_record TYPE REF TO data,
        lr_arc_11         TYPE REF TO data,
        lr_arc_12         TYPE REF TO data,
*        lr_arc_21         TYPE REF TO data,
*        lr_arc_22         TYPE REF TO data,
        lr_arc_link_01    TYPE REF TO data,
*        lr_arc_link_02    TYPE REF TO data,
        lr_arc_content_01 TYPE REF TO data,
*        lr_arc_content_02 TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value,
        ls_value2         LIKE lst_val-value,
        ls_date           TYPE string.


**************************************************************************************************
**************************************************************************************************
* IDOC specific data

  create_get_idoc_control_record( IMPORTING er_record = lr_control_record ).
  create_archive_prepare_01( IMPORTING er_arc_1 = lr_arc_11
                                       er_arc_2 = lr_arc_12 ).
*  create_archive_prepare_02( IMPORTING er_arc_1 = lr_arc_21
*                                       er_arc_2 = lr_arc_22 ).
  create_archive_external_data_1( IMPORTING er_arc_content = lr_arc_content_01 ).
*  create_archive_external_data_2( IMPORTING er_arc_content = lr_arc_content_02 ).
  create_archive_create_link_01( IMPORTING er_arc = lr_arc_link_01 ).
*  create_archive_create_link_02( IMPORTING er_arc = lr_arc_link_02 ).


**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  CONCATENATE
  '<PurchaseInvoice>  <PurchaseInvoiceData>    <DocumentSet>      <Id>66</Id>      <DocumentId>IV_4500022682_1</DocumentId>      <Guid>41babc06-9205-4ea7-ae84-3faf8860c70e</Guid'
  '>      <DocumentTypeId p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance"/>    </DocumentSet>    <PurchaseInvoiceHeader>      <Supplier>        <Metadata>          <Number>43001</Number>          <Site'
  'Code />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>OMV AG</Name1>          <Name2 />          <Address1>Rennbahnstrasse 61</Address1>          <Address2 />'
  '          <PoBox />          <PostalCode>1020</PostalCode>          <City>Wien</City>          <State />          <Location />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynat'
  'os.be</EmailAddress>          <PaymentTerms>0001</PaymentTerms>          <PaymentMethod>AKLOSU</PaymentMethod>          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimen'
  'sion5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>              <Number>ATU99999993</Number>              <Scheme>VAT</'
  'Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankNumber>19100</BankNumber>              <AccountNumber>98765454321<'
  '/AccountNumber>              <IBAN>AT421910098765454321</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              <Di'
  'mension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>   </Currency>      '
  '        <Dimension1 />              <Dimension2 />              <Dimension3 />              <Dimension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber>19100</BankNumber>           '
  '   <AccountNumber>88877766655</AccountNumber>              <IBAN>AT981910088877766655</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dime'
  'nsion3 />              <Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Partner</Name>        </Type>        <Active>true</Active>      </S'
  'upplier>      <Buyer>        <Metadata>          <Number>1043</Number>          <SiteCode />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>Dynatos Ãsterreich'
  ' GmbH</Name1>          <Name2 />          <Address1>Heugasse 1</Address1>          <Address2 />          <PoBox />          <PostalCode>1121</PostalCode>          <City>Wien</City>          <State />          <Location'
  ' />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynatos.be</EmailAddress>          <PaymentTerms />          <PaymentMethod />          <Dimension1 />          <Dimension2 />'
  '          <Dimension3 />          <Dimension4 />          <Dimension5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>'
  '              <Number>ABC123</Number>              <Scheme>VAT</Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankN'
  'umber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              '
  '<Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Company</Name>        </Type>        <Active>true</Active>      </Buyer>      <DocumentRec'
  'eiver>        <Id>0</Id>        <Number>43001</Number>        <VatNumber>ATU99999993</VatNumber>        <Name>OMV AG</Name>        <Street>Rennbahnstrasse 61</Street>        <PostalCode>1020</PostalCode>        <City>Wien<'
  '/City>        <Country>AT</Country>        <ExternalUniqueId>1043</ExternalUniqueId>      </DocumentReceiver>      <DocumentSupplier>        <Id>0</Id>        <Number>1043</Number>        <Name>Dynatos Ãsterreich GmbH</Na'
  'me>        <RegistrationNumber1>ABC123</RegistrationNumber1>        <Street>Heugasse 1</Street>        <PostalCode>1121</PostalCode>        <City>Wien</City>        <Country>AT</Country>        <CorporateGroupID>1043</Corporat'
  'eGroupID>      </DocumentSupplier>      <Id>56</Id>      <DocumentReference>IV_4500022682_1</DocumentReference>      <OrderReference>4500022682</OrderReference>      <ReceiptReference />      <DocumentDate>2022-02-21T00:00:00<'
  '/DocumentDate>      <PaymentReference />      <PaymentTerms />      <DocumentType>Invoice</DocumentType>      <DocumentSubType>PO</DocumentSubType>      <Currency>EUR</Currency>      <CurrencyRate p4:nil="true" xmlns:p4="ht'
  'tp://www.w3.org/2001/XMLSchema-instance" />      <TotalNetAmount>8000.00</TotalNetAmount>      <TotalVatAmount>1520.00</TotalVatAmount>      <TotalGrossAmount>9520.00</TotalGrossAmount>      <TotalDiscountAmount>0.00</TotalDiscountAm'
  'ount>      <DocumentReceiversNumber>43001</DocumentReceiversNumber>      <DocumentReceiversName>OMV AG</DocumentReceiversName>      <DocumentReceiversRegistrationNumber1>ATU99999993</DocumentReceiversRegistrationNumber1>      <Documen'
  'tReceiversIban>AT421910098765454321</DocumentReceiversIban>      <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>      <DocumentSuppliersName>Dynatos ?sterreich GmbH</DocumentSuppliersName>      <DocumentSuppliersRegistrationNumber'
  '1>ABC123</DocumentSuppliersRegistrationNumber1>      <VatRate1>NaN</VatRate1>      <VatRate2 />      <VatRate3 />      <VatRate4 />      <VatRate5 />      <HeaderText1 />      <HeaderText2 />      <ReceptionDate>2022-0'
  '2-21T00:00:00</ReceptionDate>      <BookingNumber>0</BookingNumber>      <BookingDate>2022-02-28T00:00:00</BookingDate>      <BookingYear>2022</BookingYear>      <BookingMonth>2</BookingMonth>      <DocumentSetId>66</DocumentSetId'
  '>      <DocumentRawId>166</DocumentRawId>      <Dimension1 />      <Dimension2 />      <Dimension3 />      <Dimension4 />      <Dimension5 />      <Dimension6 />      <Dimension7 />      <Dimension8 />      <Va'
  'tSystem>S</VatSystem>      <SupplierNumber>43001</SupplierNumber>      <SupplierName>OMV AG</SupplierName>      <SupplierRegistrationNumber>ATU99999993</SupplierRegistrationNumber>      <SupplierIban>AT421910098765454321</SupplierIban'
  '>      <BuyerNumber>1043</BuyerNumber>      <BuyerName>Dynatos ?sterreich GmbH</BuyerName>      <BuyerRegistrationNumber>ABC123</BuyerRegistrationNumber>    </PurchaseInvoiceHeader>    <PurchaseInvoiceLines>      <PurchaseInvo'
  'iceLine>        <LineId>1</LineId>        <ArticleNumberSupplier />        <ArticleNumberBuyer />        <ArticleDescription>Casings</ArticleDescription>        <StandardArticleNumber />        <Quantity>100.000000</Quantity>'
  '        <UnitCode>H87</UnitCode>        <Price>80.000000</Price>        <LineAmount>8000.000000</LineAmount>        <Status>Matched</Status>        <PurchaseInvoiceHeaderId>56</PurchaseInvoiceHeaderId>        <OrderReference>45'
  '00022682</OrderReference>        <OrderLineId>4500022682</OrderLineId>        <ReceiptReference />        <ReceiptLineId />        <Dimension1 />        <Dimension2 />        <Dimension3 />        <Dimension4 />       '
  ' <Dimension5 />        <Dimension6 />        <Dimension7 />        <Dimension8 />        <VatAmount>1520.000000</VatAmount>        <VatRate>19.0000</VatRate>        <PurchaseOrderLinesId>10784</PurchaseOrderLinesId>       '
  ' <EanCode />      </PurchaseInvoiceLine>    </PurchaseInvoiceLines>    <PurchaseInvoiceCodingLines>      <PurchaseInvoiceCodingLine>        <GlAccount>400000</GlAccount>        <CostCenter>1043</CostCenter>        <DebitAm'
  'ount>8000.00</DebitAmount>        <VatAmount>1520.00</VatAmount>        <VatRate>19.000000000000000000</VatRate>        <VatCode>VA</VatCode>        <VatSystem>S</VatSystem>        <Status>POLine</Status>        <HeaderId>56</'
  'HeaderId>        <PurchaseInvoiceLinesId>149</PurchaseInvoiceLinesId>      </PurchaseInvoiceCodingLine>    </PurchaseInvoiceCodingLines>    <PurchaseInvoiceIntrastatLines />    <PurchaseInvoicePaymentScheduleLines />    <Match'
  'ingExceptions />    <ArchiveLinks>      <Link>X2PaQk6QaOlqtJGsFTIt1g==</Link>      <Link>TooELfAdWi1JVO+OyCOzyg==</Link>    </ArchiveLinks>    <Attachments>      <Attachment>        <Filename>Base_41babc06-9205-4ea7-ae84-3'
  'faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBCYXNlIGF0dGFjaG1lbnQ=</Data>        <MimeType>text/xml</MimeType>        <Type>Base Document</Type>      '
  '</Attachment>      <Attachment>        <Filename>41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf</Filename>        <Data>VGhpcyBpcyBnZW5lcmF0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>application/pdf</MimeType>         <Type>'
  'Sales Invoice</Type>      </Attachment>      <Attachment>        <Filename>Converted_41babc06-9205-4ea7-ae84-3faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBDb252ZXJ0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeT'
  'ype>        <Type>Converted Document</Type>      </Attachment>      <Attachment>        <Filename>AccountingDocument_41babc06-9205-4ea7-ae84-3faf8860c70e_2022-02-21_11-20-34-777.xml</Filename>        '
  '<Data>VGhpcyBpcyBBY2NvdW50aW5nRG9jdW1lbnQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeType>        <Type>Attachment</T'
  'ype>      </Attachment>    </Attachments>  </PurchaseInvoiceData>  <PurchaseOrderMasterDataList>    <PurchaseOrderMasterData>      <PurchaseOrderHeader>        <DocumentReference>4500022682</DocumentReference>        <'
  'ExtraReference />        <DocumentDate>2022-02-21T00:00:00</DocumentDate>        <DocumentType>NB</DocumentType>        <DocumentSubType />        <Currency>EUR</Currency>        <TotalNetAmount>8000.00</TotalNetAmount>       '
  ' <TotalVatAmount>0.00</TotalVatAmount>        <TotalGrossAmount>8000.00</TotalGrossAmount>        <TotalDiscountAmount>0.00</TotalDiscountAmount>        <OrderReference />        <DocumentReceiversNumber>43001</DocumentReceiversNumber'
  '>        <DocumentReceiversName>OMV AG</DocumentReceiversName>        <DocumentReceiversRegistrationNumber1 />        <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>        <DocumentSuppliersName />        <HeaderText1 />'
  '        <HeaderText2 />        <DocumentStatus>Open</DocumentStatus>        <RequesterId />        <SuppliersName>OMV AG</SuppliersName>        <SupplierName>OMV AG</SupplierName>        <SuppliersNumber>43001</SuppliersNumber>'
  '        <SupplierNumber>43001</SupplierNumber>        <SuppliersRegistrationNumber />        <SupplierRegistrationNumber />        <BuyerName />        <BuyerNumber>1043</BuyerNumber>        <ReceiversName />        <Recei'
  'verName />        <ReceiversNumber>1043</ReceiversNumber>        <ReceiverNumber>1043</ReceiverNumber>      </PurchaseOrderHeader>      <PurchaseOrderLines>        <PurchaseOrderLine>          <Id>10784</Id>          <Line'
  'Id>10</LineId>          <ExtraReference>4500022682</ExtraReference>          <ArticleNumberSupplier />          <ArticleNumberBuyer>100-100</ArticleNumberBuyer>          <ArticleDescription>Casings</ArticleDescription>          <S'
  'tandardArticleNumber />          <Quantity>100.000000</Quantity>          <UnitCode>ST</UnitCode>          <Price>80.000000</Price>          <DiscountAmount>0.000000</DiscountAmount>          <LineAmount>8000.000000</LineAmount>'
  '          <Status />          <GlAccount />          <CostCenter />          <VatCode />          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimension5 />    '
  '      <Dimension6 />          <Dimension7 />          <Dimension8 />          <StartDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />          <EndDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XML'
  'Schema-instance" />          <InvoicedQuantity>0.000000</InvoicedQuantity>          <InvoicedAmount>0.000000</InvoicedAmount>        </PurchaseOrderLine>      </PurchaseOrderLines>    </PurchaseOrderMasterData>  </PurchaseOrd'
  'erMasterDataList></PurchaseInvoice>' INTO ls_value.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_RESULT' ls_value.

  add_method     lt_scenario 4 'GET_CURRENT_TIMESTAMP' '' ''.
  add_method     lt_scenario 4 'GET_CURRENT_TIMESTAMP' 'RD_TIMESTAMP' '20220101101122.1234567'.

  CONCATENATE
  '<?xml version="1.0" encoding="utf-8"?>###  #<INVOIC02 xmlns:asx="http://www.sap.com/abapxml">#  <IDOC BEGIN="1">#    <EDI_DC40 SEGMENT="1">#      <TABNAM>EDI_DC40</TABNAM>#      <DIRECT>1</DIRECT>#   <IDOCTYP>INVOIC02</IDOCTYP>#      <MESTYP>INVOI'
  'C</MESTYP>#      <SNDPOR>ROUTTY</SNDPOR>#      <SNDPRT>LS</SNDPRT>#      <SNDPRN>ROUTTY</SNDPRN>#   <RCVPOR>ROUTTY</RCVPOR>#      <RCVPRT>LS</RCVPRT>#      <RCVPRN>ROU_XML</RCVPRN>#      <DOCNUM>202201011011221234567</DOCNUM>    </EDI_DC40>#    <E'
  '1EDK01 SEGMENT="1">#      <CURCY>EUR</CURCY># <KUNDEUINR/>#      <BELNR>IV_4500022682_1</BELNR>#      <BSART>INVO</BSART>#     <EIGENUINR>ATU99999993</EIGENUINR>#    </E1EDK01>#    <E1EDKA1 SEGMENT="1">#      <PARVW>RS</PARVW>#      <LIFNR>4300'
  '1</LIFNR>#      <NAME1>OMV AG</NAME1>#    </E1EDKA1>#    <E1EDKA1 SEGMENT="1">#      <PARVW>RE</PARVW>#      <PARTN>1043</PARTN>#      <NAME1>DynatosÃsterreich GmbH</NAME1>#    </E1EDKA1>#    <E1EDK02 SEGMENT="1">#      <QUALF>009</QUALF>#      <BE'
  'LNR>IV_4500022682_1</BELNR>#      <DATUM>20220221</DATUM>#    </E1EDK02>#    <E1EDK02 SEGMENT="1">#     <QUALF>001</QUALF>#      <BELNR>4500022682</BELNR>#    </E1EDK02>#    <E1EDK02 SEGMENT="1">#   <QUALF>012</QUALF>#      <BELNR/>#    </E1EDK02'
  '>#    <E1EDK03 SEGMENT="1">#      <IDDAT>012</IDDAT>#      <DATUM>20220221</DATUM>#    </E1EDK03>#  <E1EDK04 SEGMENT="1">#      <MWSKZ/>#      <MSATZ>NaN</MSATZ>#      <MWSBT>1520.00</MWSBT>#    </E1EDK04>#    <E1EDK28 SEGMENT="1">#      <BCOUN>AT<'
  '/BCOUN>#      <BIBAN>AT421910098765454321</BIBAN>#    </E1EDK28>#    <E1EDK14 SEGMENT="1">#      <QUALF>011</QUALF>#      <ORGID>1043</ORGID>#    </E1EDK14>#    <E1EDP01 SEGMENT="1">#      <POSEX/>#    <MENGE>100.000000</MENGE>#      <MENEE>H87</ME'
  'NEE>#      <NETWR>8000.000000</NETWR>#      <E1EDP02 SEGMENT="1">#        <QUALF>001</QUALF># <BELNR>4500022682</BELNR>#        <ZEILE>1</ZEILE>#      </E1EDP02>#      <E1EDP26 SEGMENT="1">#     <QUALF>006</QUALF>#        <BETRG>80.000000</'
  'BETRG>#      </E1EDP26>#      <E1EDP26 SEGMENT="1">#        <QUALF>003</QUALF>#        <BETRG>8000.000000</BETRG>#      </E1EDP26>#      <E1EDP04 SEGMENT="1">#        <MWSATZ>19.0000</MWSATZ>#      </E1EDP04>#    </E1EDP01>#    <E1EDS01 SEGMENT="1">#'
  '    <SUMID>001</SUMID>#      <SUMME>1</SUMME>#  </E1EDS01>#    <E1EDS01 SEGMENT="1">#      <SUMID>010</SUMID>#      <SUMME>8000.00</SUMME>#      <WAERQ>EUR</WAERQ>#    </E1EDS01>#    <E1EDS01 SEGMENT="1">#      <SUMID>011</SUMID>#      <SUMME>952'
  '0.00</SUMME>#      <WAERQ>EUR</WAERQ>#    </E1EDS01>#    <E1EDS01 SEGMENT="1">#      <SUMID>005</SUMID>#      <SUMME>1520.00</SUMME>#      <WAERQ>EUR</WAERQ>#    </E1EDS01>#  </IDOC>#</INVOIC02>###  ##'
  INTO ls_value2.

  add_method     lt_scenario 5 'IDOC_INBOUND_XML_VIA_HTTP' '' ''.
  add_method     lt_scenario 5 'IDOC_INBOUND_XML_VIA_HTTP' 'IS_XML'         ls_value2.
  add_method     lt_scenario 5 'IDOC_INBOUND_XML_VIA_HTTP' 'IS_REMOTE_ADDR' '41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method     lt_scenario 6 'GET_IDOC_CONTROL_RECORD' '' ''.
  add_method     lt_scenario 6 'GET_IDOC_CONTROL_RECORD' 'IS_EXTERNAL_DOC_ID' '41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method_ref lt_scenario 6 'GET_IDOC_CONTROL_RECORD' 'ES_RECORD'          lr_control_record.

* PDF 1
  add_method     lt_scenario 7 'GET_ARCHIVE_OBJECT' '' ''.
  add_method     lt_scenario 7 'GET_ARCHIVE_OBJECT' 'IC_COMP_CODE' ''.
  add_method     lt_scenario 7 'GET_ARCHIVE_OBJECT' 'IC_USERNAME'  ''.
  add_method     lt_scenario 7 'GET_ARCHIVE_OBJECT' 'IC_ID'        'CONFIG1'.
  add_method     lt_scenario 7 'GET_ARCHIVE_OBJECT' 'RC_AR_OBJECT' 'ZEIC_PDFIV'.

  add_method     lt_scenario 8 'ARCHIVE_PREPARE' '' ''.
  add_method_ref lt_scenario 8 'ARCHIVE_PREPARE' 'CST_ARC_1' lr_arc_11.
  add_method_ref lt_scenario 8 'ARCHIVE_PREPARE' 'CST_ARC_2' lr_arc_12.

  add_method     lt_scenario 9 'ARCHIVE_EXTERNAL_DATA' '' ''.
  add_method_ref lt_scenario 9 'ARCHIVE_EXTERNAL_DATA' 'IST_ARC'       lr_arc_12.
  add_method_ref lt_scenario 9 'ARCHIVE_EXTERNAL_DATA' 'IT_CONTENT'    lr_arc_content_01.
  add_method     lt_scenario 9 'ARCHIVE_EXTERNAL_DATA' 'EC_ARC_DOC_ID' '000C29FDBA9E1EDCAAD25447B5B8A0E2'.

  add_method     lt_scenario 10 'ARCHIVE_CREATE_LINK' '' ''.
  add_method_ref lt_scenario 10 'ARCHIVE_CREATE_LINK' 'IST_ARC' lr_arc_link_01.
  add_method     lt_scenario 10 'ARCHIVE_CREATE_LINK' 'RB_OK'   abap_true.

** PDF 2
*  add_method     lt_scenario 11 'GET_ARCHIVE_OBJECT' '' ''.
*  add_method     lt_scenario 11 'GET_ARCHIVE_OBJECT' 'IC_COMP_CODE' ''.
*  add_method     lt_scenario 11 'GET_ARCHIVE_OBJECT' 'IC_USERNAME'  ''.
*  add_method     lt_scenario 11 'GET_ARCHIVE_OBJECT' 'IC_ID'        'CONFIG1'.
*  add_method     lt_scenario 11 'GET_ARCHIVE_OBJECT' 'RC_AR_OBJECT' 'ZEIC_PDFIV'.
*
*  add_method     lt_scenario 12 'ARCHIVE_PREPARE' '' ''.
*  add_method_ref lt_scenario 12 'ARCHIVE_PREPARE' 'CST_ARC_1' lr_arc_21.
*  add_method_ref lt_scenario 12 'ARCHIVE_PREPARE' 'CST_ARC_2' lr_arc_22.
*
*  add_method     lt_scenario 13 'ARCHIVE_EXTERNAL_DATA' '' ''.
*  add_method_ref lt_scenario 13 'ARCHIVE_EXTERNAL_DATA' 'IST_ARC'       lr_arc_22.
*  add_method_ref lt_scenario 13 'ARCHIVE_EXTERNAL_DATA' 'IT_CONTENT'    lr_arc_content_02.
*  add_method     lt_scenario 13 'ARCHIVE_EXTERNAL_DATA' 'EC_ARC_DOC_ID' '000C29FDBA9E1EDCAAD25447B5B8A0E3'.
*
*  add_method     lt_scenario 14 'ARCHIVE_CREATE_LINK' '' ''.
*  add_method_ref lt_scenario 14 'ARCHIVE_CREATE_LINK' 'IST_ARC' lr_arc_link_02.
*  add_method     lt_scenario 14 'ARCHIVE_CREATE_LINK' 'RB_OK'   abap_true.

  add_method lt_scenario 11 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 0  'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 0  'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 0  'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 12 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 0  'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 0  'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 13 'CALL_HTTP' '' ''.
  add_method lt_scenario 0  'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 0  'CALL_HTTP' 'IS_INPUT'       '{"successful":true,"errorcode":"","errormessage":""}'.
  add_method lt_scenario 0  'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 0  'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 0  'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 0  'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  add_method lt_scenario 14 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 0  'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 0  'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 0  'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method lt_scenario 15 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 0  'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 0  'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 16 'CALL_HTTP' '' ''.
  add_method lt_scenario 0  'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 0  'CALL_HTTP' 'IS_INPUT'       '{"status":"OK","code":"Processed","message":"Document 41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf archived IDOC 3230747 Created for ROU_XML with Key 41babc06-9205-4ea7-ae84-3faf8860c70e"}'.
  add_method lt_scenario 0  'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 0  'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 0  'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 0  'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD get_sc_routtyexp_iv_to_pd_04.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty Express to a local file
* Version: 04

**************************************************************************************************

  DATA: lt_scenario LIKE mst_scenario-scenario,
        lst_val     LIKE LINE OF lt_scenario,
        ls_value    LIKE lst_val-value,
        ls_date     TYPE string.


**************************************************************************************************
**************************************************************************************************

**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  CONCATENATE
  '<PurchaseInvoice>  <PurchaseInvoiceData>    <DocumentSet>      <Id>66</Id>      <DocumentId>IV_4500022682_1</DocumentId>      <Guid>41babc06-9205-4ea7-ae84-3faf8860c70e</Guid'
  '>      <DocumentTypeId p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance"/>    </DocumentSet>    <PurchaseInvoiceHeader>      <Supplier>        <Metadata>          <Number>43001</Number>          <Site'
  'Code />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>OMV AG</Name1>          <Name2 />          <Address1>Rennbahnstrasse 61</Address1>          <Address2 />'
  '          <PoBox />          <PostalCode>1020</PostalCode>          <City>Wien</City>          <State />          <Location />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynat'
  'os.be</EmailAddress>          <PaymentTerms>0001</PaymentTerms>          <PaymentMethod>AKLOSU</PaymentMethod>          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimen'
  'sion5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>              <Number>ATU99999993</Number>              <Scheme>VAT</'
  'Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankNumber>19100</BankNumber>              <AccountNumber>98765454321<'
  '/AccountNumber>              <IBAN>AT421910098765454321</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              <Di'
  'mension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>   </Currency>      '
  '        <Dimension1 />              <Dimension2 />              <Dimension3 />              <Dimension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber>19100</BankNumber>           '
  '   <AccountNumber>88877766655</AccountNumber>              <IBAN>AT981910088877766655</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dime'
  'nsion3 />              <Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Partner</Name>        </Type>        <Active>true</Active>      </S'
  'upplier>      <Buyer>        <Metadata>          <Number>1043</Number>          <SiteCode />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>Dynatos Ãsterreich'
  ' GmbH</Name1>          <Name2 />          <Address1>Heugasse 1</Address1>          <Address2 />          <PoBox />          <PostalCode>1121</PostalCode>          <City>Wien</City>          <State />          <Location'
  ' />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynatos.be</EmailAddress>          <PaymentTerms />          <PaymentMethod />          <Dimension1 />          <Dimension2 />'
  '          <Dimension3 />          <Dimension4 />          <Dimension5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>'
  '              <Number>ABC123</Number>              <Scheme>VAT</Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankN'
  'umber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              '
  '<Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Company</Name>        </Type>        <Active>true</Active>      </Buyer>      <DocumentRec'
  'eiver>        <Id>0</Id>        <Number>43001</Number>        <VatNumber>ATU99999993</VatNumber>        <Name>OMV AG</Name>        <Street>Rennbahnstrasse 61</Street>        <PostalCode>1020</PostalCode>        <City>Wien<'
  '/City>        <Country>AT</Country>        <ExternalUniqueId>1043</ExternalUniqueId>      </DocumentReceiver>      <DocumentSupplier>        <Id>0</Id>        <Number>1043</Number>        <Name>Dynatos Ãsterreich GmbH</Na'
  'me>        <RegistrationNumber1>ABC123</RegistrationNumber1>        <Street>Heugasse 1</Street>        <PostalCode>1121</PostalCode>        <City>Wien</City>        <Country>AT</Country>        <CorporateGroupID>1043</Corporat'
  'eGroupID>      </DocumentSupplier>      <Id>56</Id>      <DocumentReference>IV_4500022682_1</DocumentReference>      <OrderReference>4500022682</OrderReference>      <ReceiptReference />      <DocumentDate>2022-02-21T00:00:00<'
  '/DocumentDate>      <PaymentReference />      <PaymentTerms />      <DocumentType>Invoice</DocumentType>      <DocumentSubType>PO</DocumentSubType>      <Currency>EUR</Currency>      <CurrencyRate p4:nil="true" xmlns:p4="ht'
  'tp://www.w3.org/2001/XMLSchema-instance" />      <TotalNetAmount>8000.00</TotalNetAmount>      <TotalVatAmount>1520.00</TotalVatAmount>      <TotalGrossAmount>9520.00</TotalGrossAmount>      <TotalDiscountAmount>0.00</TotalDiscountAm'
  'ount>      <DocumentReceiversNumber>43001</DocumentReceiversNumber>      <DocumentReceiversName>OMV AG</DocumentReceiversName>      <DocumentReceiversRegistrationNumber1>ATU99999993</DocumentReceiversRegistrationNumber1>      <Documen'
  'tReceiversIban>AT421910098765454321</DocumentReceiversIban>      <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>      <DocumentSuppliersName>Dynatos ?sterreich GmbH</DocumentSuppliersName>      <DocumentSuppliersRegistrationNumber'
  '1>ABC123</DocumentSuppliersRegistrationNumber1>      <VatRate1>NaN</VatRate1>      <VatRate2 />      <VatRate3 />      <VatRate4 />      <VatRate5 />      <HeaderText1 />      <HeaderText2 />      <ReceptionDate>2022-0'
  '2-21T00:00:00</ReceptionDate>      <BookingNumber>0</BookingNumber>      <BookingDate>2022-02-28T00:00:00</BookingDate>      <BookingYear>2022</BookingYear>      <BookingMonth>2</BookingMonth>      <DocumentSetId>66</DocumentSetId'
  '>      <DocumentRawId>166</DocumentRawId>      <Dimension1 />      <Dimension2 />      <Dimension3 />      <Dimension4 />      <Dimension5 />      <Dimension6 />      <Dimension7 />      <Dimension8 />      <Va'
  'tSystem>S</VatSystem>      <SupplierNumber>43001</SupplierNumber>      <SupplierName>OMV AG</SupplierName>      <SupplierRegistrationNumber>ATU99999993</SupplierRegistrationNumber>      <SupplierIban>AT421910098765454321</SupplierIban'
  '>      <BuyerNumber>1043</BuyerNumber>      <BuyerName>Dynatos ?sterreich GmbH</BuyerName>      <BuyerRegistrationNumber>ABC123</BuyerRegistrationNumber>    </PurchaseInvoiceHeader>    <PurchaseInvoiceLines>      <PurchaseInvo'
  'iceLine>        <LineId>1</LineId>        <ArticleNumberSupplier />        <ArticleNumberBuyer />        <ArticleDescription>Casings</ArticleDescription>        <StandardArticleNumber />        <Quantity>100.000000</Quantity>'
  '        <UnitCode>H87</UnitCode>        <Price>80.000000</Price>        <LineAmount>8000.000000</LineAmount>        <Status>Matched</Status>        <PurchaseInvoiceHeaderId>56</PurchaseInvoiceHeaderId>        <OrderReference>45'
  '00022682</OrderReference>        <OrderLineId>4500022682</OrderLineId>        <ReceiptReference />        <ReceiptLineId />        <Dimension1 />        <Dimension2 />        <Dimension3 />        <Dimension4 />       '
  ' <Dimension5 />        <Dimension6 />        <Dimension7 />        <Dimension8 />        <VatAmount>1520.000000</VatAmount>        <VatRate>19.0000</VatRate>        <PurchaseOrderLinesId>10784</PurchaseOrderLinesId>       '
  ' <EanCode />      </PurchaseInvoiceLine>    </PurchaseInvoiceLines>    <PurchaseInvoiceCodingLines>      <PurchaseInvoiceCodingLine>        <GlAccount>400000</GlAccount>        <CostCenter>1043</CostCenter>        <DebitAm'
  'ount>8000.00</DebitAmount>        <VatAmount>1520.00</VatAmount>        <VatRate>19.000000000000000000</VatRate>        <VatCode>VA</VatCode>        <VatSystem>S</VatSystem>        <Status>POLine</Status>        <HeaderId>56</'
  'HeaderId>        <PurchaseInvoiceLinesId>149</PurchaseInvoiceLinesId>      </PurchaseInvoiceCodingLine>    </PurchaseInvoiceCodingLines>    <PurchaseInvoiceIntrastatLines />    <PurchaseInvoicePaymentScheduleLines />    <Match'
  'ingExceptions />    <ArchiveLinks>      <Link>X2PaQk6QaOlqtJGsFTIt1g==</Link>      <Link>TooELfAdWi1JVO+OyCOzyg==</Link>    </ArchiveLinks>    <Attachments>      <Attachment>        <Filename>Base_41babc06-9205-4ea7-ae84-3'
  'faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBCYXNlIGF0dGFjaG1lbnQ=</Data>        <MimeType>text/xml</MimeType>        <Type>Base Document</Type>      '
  '</Attachment>      <Attachment>        <Filename>41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf</Filename>        <Data>VGhpcyBpcyBnZW5lcmF0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>application/pdf</MimeType>         <Type>'
  'Sales Invoice</Type>      </Attachment>      <Attachment>        <Filename>Converted_41babc06-9205-4ea7-ae84-3faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBDb252ZXJ0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeT'
  'ype>        <Type>Converted Document</Type>      </Attachment>      <Attachment>        <Filename>AccountingDocument_41babc06-9205-4ea7-ae84-3faf8860c70e_2022-02-21_11-20-34-777.xml</Filename>        '
  '<Data>VGhpcyBpcyBBY2NvdW50aW5nRG9jdW1lbnQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeType>        <Type>Attachment</T'
  'ype>      </Attachment>    </Attachments>  </PurchaseInvoiceData>  <PurchaseOrderMasterDataList>    <PurchaseOrderMasterData>      <PurchaseOrderHeader>        <DocumentReference>4500022682</DocumentReference>        <'
  'ExtraReference />        <DocumentDate>2022-02-21T00:00:00</DocumentDate>        <DocumentType>NB</DocumentType>        <DocumentSubType />        <Currency>EUR</Currency>        <TotalNetAmount>8000.00</TotalNetAmount>       '
  ' <TotalVatAmount>0.00</TotalVatAmount>        <TotalGrossAmount>8000.00</TotalGrossAmount>        <TotalDiscountAmount>0.00</TotalDiscountAmount>        <OrderReference />        <DocumentReceiversNumber>43001</DocumentReceiversNumber'
  '>        <DocumentReceiversName>OMV AG</DocumentReceiversName>        <DocumentReceiversRegistrationNumber1 />        <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>        <DocumentSuppliersName />        <HeaderText1 />'
  '        <HeaderText2 />        <DocumentStatus>Open</DocumentStatus>        <RequesterId />        <SuppliersName>OMV AG</SuppliersName>        <SupplierName>OMV AG</SupplierName>        <SuppliersNumber>43001</SuppliersNumber>'
  '        <SupplierNumber>43001</SupplierNumber>        <SuppliersRegistrationNumber />        <SupplierRegistrationNumber />        <BuyerName />        <BuyerNumber>1043</BuyerNumber>        <ReceiversName />        <Recei'
  'verName />        <ReceiversNumber>1043</ReceiversNumber>        <ReceiverNumber>1043</ReceiverNumber>      </PurchaseOrderHeader>      <PurchaseOrderLines>        <PurchaseOrderLine>          <Id>10784</Id>          <Line'
  'Id>10</LineId>          <ExtraReference>4500022682</ExtraReference>          <ArticleNumberSupplier />          <ArticleNumberBuyer>100-100</ArticleNumberBuyer>          <ArticleDescription>Casings</ArticleDescription>          <S'
  'tandardArticleNumber />          <Quantity>100.000000</Quantity>          <UnitCode>ST</UnitCode>          <Price>80.000000</Price>          <DiscountAmount>0.000000</DiscountAmount>          <LineAmount>8000.000000</LineAmount>'
  '          <Status />          <GlAccount />          <CostCenter />          <VatCode />          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimension5 />    '
  '      <Dimension6 />          <Dimension7 />          <Dimension8 />          <StartDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />          <EndDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XML'
  'Schema-instance" />          <InvoicedQuantity>0.000000</InvoicedQuantity>          <InvoicedAmount>0.000000</InvoicedAmount>        </PurchaseOrderLine>      </PurchaseOrderLines>    </PurchaseOrderMasterData>  </PurchaseOrd'
  'erMasterDataList></PurchaseInvoice>' INTO ls_value.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_RESULT' ls_value.

  add_method lt_scenario 4'GET_FILE_NAME_USING_PATH' '' ''.
  add_method lt_scenario 4 'GET_FILE_NAME_USING_PATH' 'IC_LOGICAL_PATH'   'ZDYN_RSO_IMPORT'.
  add_method lt_scenario 4 'GET_FILE_NAME_USING_PATH' 'IB_USE_BUFFER'     abap_true.
  add_method lt_scenario 4 'GET_FILE_NAME_USING_PATH' 'IS_FILE_NAME'      '41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.
  add_method lt_scenario 4 'GET_FILE_NAME_USING_PATH' 'ES_FULL_FILE_NAME' 'D:\RSO\41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.

  add_method lt_scenario 5 'STORE_FILE_ON_APPSERVER' '' ''.
  add_method lt_scenario 5 'STORE_FILE_ON_APPSERVER' 'IS_FILENAME' 'D:\RSO\41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.
  add_method lt_scenario 5 'STORE_FILE_ON_APPSERVER' 'IT_DATA_LEN' '13'.
  add_method lt_scenario 5 'STORE_FILE_ON_APPSERVER' 'RB_OK'       abap_true.

  add_method lt_scenario 6 'GET_FILE_NAME_USING_PATH' '' ''.
  add_method lt_scenario 6 'GET_FILE_NAME_USING_PATH' 'IC_LOGICAL_PATH'   'ZDYN_RSO_IMPORT'.
  add_method lt_scenario 6 'GET_FILE_NAME_USING_PATH' 'IB_USE_BUFFER'     abap_true.
  add_method lt_scenario 6 'GET_FILE_NAME_USING_PATH' 'IS_FILE_NAME'      '41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf'.
  add_method lt_scenario 6 'GET_FILE_NAME_USING_PATH' 'ES_FULL_FILE_NAME' 'D:\RSO\41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf'.

  add_method lt_scenario 7 'STORE_FILE_ON_APPSERVER' '' ''.
  add_method lt_scenario 7 'STORE_FILE_ON_APPSERVER' 'IS_FILENAME' 'D:\RSO\41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf'.
  add_method lt_scenario 7 'STORE_FILE_ON_APPSERVER' 'IT_DATA_LEN' '1'.
  add_method lt_scenario 7 'STORE_FILE_ON_APPSERVER' 'RB_OK'       abap_true.

  add_method lt_scenario 8 'GET_FILE_NAME_USING_PATH' '' ''.
  add_method lt_scenario 8 'GET_FILE_NAME_USING_PATH' 'IC_LOGICAL_PATH'   'ZDYN_RSO_IMPORT'.
  add_method lt_scenario 8 'GET_FILE_NAME_USING_PATH' 'IB_USE_BUFFER'     abap_true.
  add_method lt_scenario 8 'GET_FILE_NAME_USING_PATH' 'IS_FILE_NAME'      'Base_41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.
  add_method lt_scenario 8 'GET_FILE_NAME_USING_PATH' 'ES_FULL_FILE_NAME' 'D:\RSO\Base_41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.

  add_method lt_scenario 9 'STORE_FILE_ON_APPSERVER' '' ''.
  add_method lt_scenario 9 'STORE_FILE_ON_APPSERVER' 'IS_FILENAME' 'D:\RSO\Base_41babc06-9205-4ea7-ae84-3faf8860c70e.xml'.
  add_method lt_scenario 9 'STORE_FILE_ON_APPSERVER' 'IT_DATA_LEN' '1'.
  add_method lt_scenario 9 'STORE_FILE_ON_APPSERVER' 'RB_OK'       abap_true.

  add_method lt_scenario 10 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 10 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 10 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 10 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 11 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 11 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 11 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 12 'CALL_HTTP' '' ''.
  add_method lt_scenario 12 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 12 'CALL_HTTP' 'IS_INPUT'       '{"successful":true,"errorcode":"","errormessage":""}'.
  add_method lt_scenario 12 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 12 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 12 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 12 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  add_method lt_scenario 13 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 13 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 13 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 13 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method lt_scenario 14 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 14 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 14 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 15 'CALL_HTTP' '' ''.
  add_method lt_scenario 15 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  CONCATENATE
  '{"status":"OK","code":"Processed","message":"File 41babc06-9205-4ea7-ae84-3faf8860c70e.xml created File 41babc06-9205-4ea7-ae84-3faf8860c70e_gene'
  'rated.pdf copied to file server File Base_41babc06-9205-4ea7-ae84-3faf8860c70e.xml copied to file server Document 41babc06-9205-4ea7-ae84-3faf8860c70e processed"}'
    INTO ls_value.
  add_method lt_scenario 15 'CALL_HTTP' 'IS_INPUT'       ls_value.
  add_method lt_scenario 15 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 15 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 15 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 15 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_ROUTTYEXP_IV_TO_PD_06.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty to PD, error in HTTP GET while
* retrieving a document
* Version: 01

**************************************************************************************************
  DATA: lt_scenario      LIKE mst_scenario-scenario,
        lst_val          LIKE LINE OF lt_scenario,
        ls_value         LIKE lst_val-value.

**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '500'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  add_method lt_scenario 4 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 4 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 4 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 4 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 5 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 5 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 5 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 6 'CALL_HTTP' '' ''.
  add_method lt_scenario 6 'CALL_HTTP' 'IC_METHOD'      'PUT'.
  add_method lt_scenario 6 'CALL_HTTP' 'IS_INPUT'       '{"successful":false,"errorcode":"ProcessingError","errormessage":"HTTP connection failed with status 500 Test message Routty ID: 41babc06-9205-4ea7-ae84-3faf8860c70e"}'.
  add_method lt_scenario 6 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 6 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 6 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 6 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_ROUTTYEXP_IV_TO_PD_07.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty Express to PD, no attachment provided to RFC
* Version: 07

**************************************************************************************************

  DATA: lr_rfc_extdata   TYPE REF TO data,
        lr_rfc_archiving TYPE REF TO data,
        lr_rfc_content   TYPE REF TO data,
        lr_rfc_bo_hdr    TYPE REF TO data,
        lr_rfc_status    TYPE REF TO data,
        lr_rfc_messages  TYPE REF TO data,

        lt_scenario      LIKE mst_scenario-scenario,
        lst_val          LIKE LINE OF lt_scenario,
        ls_value         LIKE lst_val-value,
        ls_date          TYPE string.


**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD

  create_rfc_data_submit_data_mm( EXPORTING ib_skip_attach   = abap_true
                                            ib_express       = abap_true
                                  IMPORTING er_rfc_extdata   = lr_rfc_extdata
                                            er_rfc_archiving = lr_rfc_archiving
                                            er_rfc_content   = lr_rfc_content
                                            er_rfc_bo_hdr    = lr_rfc_bo_hdr
                                            er_rfc_status    = lr_rfc_status
                                            er_rfc_messages  = lr_rfc_messages ).


**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  CONCATENATE
  '<PurchaseInvoice>  <PurchaseInvoiceData>    <DocumentSet>      <Id>66</Id>      <DocumentId>IV_4500022682_1</DocumentId>      <Guid>41babc06-9205-4ea7-ae84-3faf8860c70e</Guid'
  '>      <DocumentTypeId p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance"/>    </DocumentSet>    <PurchaseInvoiceHeader>      <Supplier>        <Metadata>          <Number>43001</Number>          <Site'
  'Code />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>OMV AG</Name1>          <Name2 />          <Address1>Rennbahnstrasse 61</Address1>          <Address2 />'
  '          <PoBox />          <PostalCode>1020</PostalCode>          <City>Wien</City>          <State />          <Location />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynat'
  'os.be</EmailAddress>          <PaymentTerms>0001</PaymentTerms>          <PaymentMethod>AKLOSU</PaymentMethod>          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimen'
  'sion5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>              <Number>ATU99999993</Number>              <Scheme>VAT</'
  'Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankNumber>19100</BankNumber>              <AccountNumber>98765454321<'
  '/AccountNumber>              <IBAN>AT421910098765454321</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              <Di'
  'mension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>   </Currency>      '
  '        <Dimension1 />              <Dimension2 />              <Dimension3 />              <Dimension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber>19100</BankNumber>           '
  '   <AccountNumber>88877766655</AccountNumber>              <IBAN>AT981910088877766655</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dime'
  'nsion3 />              <Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Partner</Name>        </Type>        <Active>true</Active>      </S'
  'upplier>      <Buyer>        <Metadata>          <Number>1043</Number>          <SiteCode />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>Dynatos Ãsterreich'
  ' GmbH</Name1>          <Name2 />          <Address1>Heugasse 1</Address1>          <Address2 />          <PoBox />          <PostalCode>1121</PostalCode>          <City>Wien</City>          <State />          <Location'
  ' />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynatos.be</EmailAddress>          <PaymentTerms />          <PaymentMethod />          <Dimension1 />          <Dimension2 />'
  '          <Dimension3 />          <Dimension4 />          <Dimension5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>'
  '              <Number>ABC123</Number>              <Scheme>VAT</Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankN'
  'umber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              '
  '<Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Company</Name>        </Type>        <Active>true</Active>      </Buyer>      <DocumentRec'
  'eiver>        <Id>0</Id>        <Number>43001</Number>        <VatNumber>ATU99999993</VatNumber>        <Name>OMV AG</Name>        <Street>Rennbahnstrasse 61</Street>        <PostalCode>1020</PostalCode>        <City>Wien<'
  '/City>        <Country>AT</Country>        <ExternalUniqueId>1043</ExternalUniqueId>      </DocumentReceiver>      <DocumentSupplier>        <Id>0</Id>        <Number>1043</Number>        <Name>Dynatos Ãsterreich GmbH</Na'
  'me>        <RegistrationNumber1>ABC123</RegistrationNumber1>        <Street>Heugasse 1</Street>        <PostalCode>1121</PostalCode>        <City>Wien</City>        <Country>AT</Country>        <CorporateGroupID>1043</Corporat'
  'eGroupID>      </DocumentSupplier>      <Id>56</Id>      <DocumentReference>IV_4500022682_1</DocumentReference>      <OrderReference>4500022682</OrderReference>      <ReceiptReference />      <DocumentDate>2022-02-21T00:00:00<'
  '/DocumentDate>      <PaymentReference />      <PaymentTerms />      <DocumentType>Invoice</DocumentType>      <DocumentSubType>PO</DocumentSubType>      <Currency>EUR</Currency>      <CurrencyRate p4:nil="true" xmlns:p4="ht'
  'tp://www.w3.org/2001/XMLSchema-instance" />      <TotalNetAmount>8000.00</TotalNetAmount>      <TotalVatAmount>1520.00</TotalVatAmount>      <TotalGrossAmount>9520.00</TotalGrossAmount>      <TotalDiscountAmount>0.00</TotalDiscountAm'
  'ount>      <DocumentReceiversNumber>43001</DocumentReceiversNumber>      <DocumentReceiversName>OMV AG</DocumentReceiversName>      <DocumentReceiversRegistrationNumber1>ATU99999993</DocumentReceiversRegistrationNumber1>      <Documen'
  'tReceiversIban>AT421910098765454321</DocumentReceiversIban>      <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>      <DocumentSuppliersName>Dynatos ?sterreich GmbH</DocumentSuppliersName>      <DocumentSuppliersRegistrationNumber'
  '1>ABC123</DocumentSuppliersRegistrationNumber1>      <VatRate1>NaN</VatRate1>      <VatRate2 />      <VatRate3 />      <VatRate4 />      <VatRate5 />      <HeaderText1 />      <HeaderText2 />      <ReceptionDate>2022-0'
  '2-21T00:00:00</ReceptionDate>      <BookingNumber>0</BookingNumber>      <BookingDate>2022-02-28T00:00:00</BookingDate>      <BookingYear>2022</BookingYear>      <BookingMonth>2</BookingMonth>      <DocumentSetId>66</DocumentSetId'
  '>      <DocumentRawId>166</DocumentRawId>      <Dimension1 />      <Dimension2 />      <Dimension3 />      <Dimension4 />      <Dimension5 />      <Dimension6 />      <Dimension7 />      <Dimension8 />      <Va'
  'tSystem>S</VatSystem>      <SupplierNumber>43001</SupplierNumber>      <SupplierName>OMV AG</SupplierName>      <SupplierRegistrationNumber>ATU99999993</SupplierRegistrationNumber>      <SupplierIban>AT421910098765454321</SupplierIban'
  '>      <BuyerNumber>1043</BuyerNumber>      <BuyerName>Dynatos ?sterreich GmbH</BuyerName>      <BuyerRegistrationNumber>ABC123</BuyerRegistrationNumber>    </PurchaseInvoiceHeader>    <PurchaseInvoiceLines>      <PurchaseInvo'
  'iceLine>        <LineId>1</LineId>        <ArticleNumberSupplier />        <ArticleNumberBuyer />        <ArticleDescription>Casings</ArticleDescription>        <StandardArticleNumber />        <Quantity>100.000000</Quantity>'
  '        <UnitCode>H87</UnitCode>        <Price>80.000000</Price>        <LineAmount>8000.000000</LineAmount>        <Status>Matched</Status>        <PurchaseInvoiceHeaderId>56</PurchaseInvoiceHeaderId>        <OrderReference>45'
  '00022682</OrderReference>        <OrderLineId>4500022682</OrderLineId>        <ReceiptReference />        <ReceiptLineId />        <Dimension1 />        <Dimension2 />        <Dimension3 />        <Dimension4 />       '
  ' <Dimension5 />        <Dimension6 />        <Dimension7 />        <Dimension8 />        <VatAmount>1520.000000</VatAmount>        <VatRate>19.0000</VatRate>        <PurchaseOrderLinesId>10784</PurchaseOrderLinesId>       '
  ' <EanCode />      </PurchaseInvoiceLine>    </PurchaseInvoiceLines>    <PurchaseInvoiceCodingLines>      <PurchaseInvoiceCodingLine>        <GlAccount>400000</GlAccount>        <CostCenter>1043</CostCenter>        <DebitAm'
  'ount>8000.00</DebitAmount>        <VatAmount>1520.00</VatAmount>        <VatRate>19.000000000000000000</VatRate>        <VatCode>VA</VatCode>        <VatSystem>S</VatSystem>        <Status>POLine</Status>        <HeaderId>56</'
  'HeaderId>        <PurchaseInvoiceLinesId>149</PurchaseInvoiceLinesId>      </PurchaseInvoiceCodingLine>    </PurchaseInvoiceCodingLines>    <PurchaseInvoiceIntrastatLines />    <PurchaseInvoicePaymentScheduleLines />    <Match'
  'ingExceptions />    <ArchiveLinks>      <Link>X2PaQk6QaOlqtJGsFTIt1g==</Link>      <Link>TooELfAdWi1JVO+OyCOzyg==</Link>    </ArchiveLinks>    <Attachments>      <Attachment>        <Filename>Base_41babc06-9205-4ea7-ae84-3'
  'faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBCYXNlIGF0dGFjaG1lbnQ=</Data>        <MimeType>text/xml</MimeType>        <Type>Base Document</Type>      '
  '</Attachment>      <Attachment>        <Filename>41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf</Filename>        <Data>VGhpcyBpcyBnZW5lcmF0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>application/pdf</MimeType>         <Type>'
  'Sales Invoice</Type>      </Attachment>      <Attachment>        <Filename>Converted_41babc06-9205-4ea7-ae84-3faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBDb252ZXJ0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeT'
  'ype>        <Type>Converted Document</Type>      </Attachment>      <Attachment>        <Filename>AccountingDocument_41babc06-9205-4ea7-ae84-3faf8860c70e_2022-02-21_11-20-34-777.xml</Filename>        '
  '<Data>VGhpcyBpcyBBY2NvdW50aW5nRG9jdW1lbnQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeType>        <Type>Attachment</T'
  'ype>      </Attachment>    </Attachments>  </PurchaseInvoiceData>  <PurchaseOrderMasterDataList>    <PurchaseOrderMasterData>      <PurchaseOrderHeader>        <DocumentReference>4500022682</DocumentReference>        <'
  'ExtraReference />        <DocumentDate>2022-02-21T00:00:00</DocumentDate>        <DocumentType>NB</DocumentType>        <DocumentSubType />        <Currency>EUR</Currency>        <TotalNetAmount>8000.00</TotalNetAmount>       '
  ' <TotalVatAmount>0.00</TotalVatAmount>        <TotalGrossAmount>8000.00</TotalGrossAmount>        <TotalDiscountAmount>0.00</TotalDiscountAmount>        <OrderReference />        <DocumentReceiversNumber>43001</DocumentReceiversNumber'
  '>        <DocumentReceiversName>OMV AG</DocumentReceiversName>        <DocumentReceiversRegistrationNumber1 />        <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>        <DocumentSuppliersName />        <HeaderText1 />'
  '        <HeaderText2 />        <DocumentStatus>Open</DocumentStatus>        <RequesterId />        <SuppliersName>OMV AG</SuppliersName>        <SupplierName>OMV AG</SupplierName>        <SuppliersNumber>43001</SuppliersNumber>'
  '        <SupplierNumber>43001</SupplierNumber>        <SuppliersRegistrationNumber />        <SupplierRegistrationNumber />        <BuyerName />        <BuyerNumber>1043</BuyerNumber>        <ReceiversName />        <Recei'
  'verName />        <ReceiversNumber>1043</ReceiversNumber>        <ReceiverNumber>1043</ReceiverNumber>      </PurchaseOrderHeader>      <PurchaseOrderLines>        <PurchaseOrderLine>          <Id>10784</Id>          <Line'
  'Id>10</LineId>          <ExtraReference>4500022682</ExtraReference>          <ArticleNumberSupplier />          <ArticleNumberBuyer>100-100</ArticleNumberBuyer>          <ArticleDescription>Casings</ArticleDescription>          <S'
  'tandardArticleNumber />          <Quantity>100.000000</Quantity>          <UnitCode>ST</UnitCode>          <Price>80.000000</Price>          <DiscountAmount>0.000000</DiscountAmount>          <LineAmount>8000.000000</LineAmount>'
  '          <Status />          <GlAccount />          <CostCenter />          <VatCode />          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimension5 />    '
  '      <Dimension6 />          <Dimension7 />          <Dimension8 />          <StartDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />          <EndDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XML'
  'Schema-instance" />          <InvoicedQuantity>0.000000</InvoicedQuantity>          <InvoicedAmount>0.000000</InvoicedAmount>        </PurchaseOrderLine>      </PurchaseOrderLines>    </PurchaseOrderMasterData>  </PurchaseOrd'
  'erMasterDataList></PurchaseInvoice>' INTO ls_value.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_RESULT' ls_value.

  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' '' ''.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_OBJ'       'IV'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_ENV'       'XB'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_MAPID'     'ROUTTY'.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_EXTDATA'   lr_rfc_extdata.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_ARCHIVING' lr_rfc_archiving.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_CONTENT'   lr_rfc_content.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_BO_HDR'    lr_rfc_bo_hdr.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_STATUS'    lr_rfc_status.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ET_MESSAGES'  lr_rfc_messages.

  add_method lt_scenario 5 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 5 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 6 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 7 'CALL_HTTP' '' ''.
  add_method lt_scenario 7 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_INPUT'       '{"successful":true,"errorcode":"","errormessage":""}'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 7 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  add_method lt_scenario 8 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 8 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method lt_scenario 9 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 10 'CALL_HTTP' '' ''.
  add_method lt_scenario 10 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_INPUT'       '{"status":"OK","code":"Processed","message":"Document transferred from ROUTTY 41BABC0692054EA7AE843FAF8860C70E to PDAP 3010"}'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 10 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD GET_SC_ROUTTYEXP_IV_TO_PD_08.

**************************************************************************************************
* Scenario: MM Invoice is transferred from Routty Express to PD, with additinal PDAP field REVERSAL_DOC
*           on the header level and FINAL_INV on the item level
* Version: 08

**************************************************************************************************

  DATA: lr_rfc_extdata   TYPE REF TO data,
        lr_rfc_archiving TYPE REF TO data,
        lr_rfc_content   TYPE REF TO data,
        lr_rfc_bo_hdr    TYPE REF TO data,
        lr_rfc_status    TYPE REF TO data,
        lr_rfc_messages  TYPE REF TO data,

        lt_scenario      LIKE mst_scenario-scenario,
        lst_val          LIKE LINE OF lt_scenario,
        ls_value         LIKE lst_val-value,
        ls_date          TYPE string.


**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD

  create_rfc_data_submit_data_mm( EXPORTING ib_express       = abap_true
                                            ib_with_pdap     = abap_true
                                  IMPORTING er_rfc_extdata   = lr_rfc_extdata
                                            er_rfc_archiving = lr_rfc_archiving
                                            er_rfc_content   = lr_rfc_content
                                            er_rfc_bo_hdr    = lr_rfc_bo_hdr
                                            er_rfc_status    = lr_rfc_status
                                            er_rfc_messages  = lr_rfc_messages ).


**************************************************************************************************
**************************************************************************************************
* Scenario definition

  mst_scenario-current_id = 1.

  add_method lt_scenario 1 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 1 'CREATE_REL_URL' 'PATH'        '/output-api/output-documents'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'QUERYSTRING' 'page=1'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'STATEFUL'    '1-'.
  add_method lt_scenario 1 'CREATE_REL_URL' 'URL'         '/output-api/output-documents'.

  add_method lt_scenario 2 'CALL_HTTP' '' ''.
  add_method lt_scenario 2 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 2 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents'.
  add_method lt_scenario 2 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  CONCATENATE
  '{"page":1,"limit":20,"pages":1,"count":1,"_embedded":{"_entries":'
  '[{"id":"41babc06-9205-4ea7-ae84-3faf8860c70e","correlationid":null,"inputChannelName":null,"receivedOn":"0001-01-01T00:00:00","downloadUrl":"https://dev.routty.be:443/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc"}]'
  '}}'
    INTO ls_value.
  add_method lt_scenario 2 'CALL_HTTP' 'ES_RESULT'      ls_value.

  add_method lt_scenario 3 'CALL_HTTP' '' ''.
  add_method lt_scenario 3 'CALL_HTTP' 'IC_METHOD'      'GET'.
  add_method lt_scenario 3 'CALL_HTTP' 'IS_URL'         '/export/PEPPOL/41babc06-9205-4ea7-ae84-3faf8860c70e?param=abc'.
  add_method lt_scenario 3 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.

  CONCATENATE
  '<PurchaseInvoice>  <PurchaseInvoiceData> <DocumentSet> <Id>66</Id> <DocumentId>IV_4500022682_1</DocumentId> <Guid>41babc06-9205-4ea7-ae84-3faf8860c70e</Guid'
  '>      <DocumentTypeId p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance"/>    </DocumentSet>    <PurchaseInvoiceHeader> <ReversalDoc>ABC</ReversalDoc>     <Supplier> <Metadata> <Number>43001</Number> <Site'
  'Code />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>OMV AG</Name1>          <Name2 />          <Address1>Rennbahnstrasse 61</Address1>          <Address2 />'
  '          <PoBox />          <PostalCode>1020</PostalCode>          <City>Wien</City>          <State />          <Location />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynat'
  'os.be</EmailAddress>          <PaymentTerms>0001</PaymentTerms>          <PaymentMethod>AKLOSU</PaymentMethod>          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimen'
  'sion5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>              <Number>ATU99999993</Number>              <Scheme>VAT</'
  'Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankNumber>19100</BankNumber>              <AccountNumber>98765454321<'
  '/AccountNumber>              <IBAN>AT421910098765454321</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              <Di'
  'mension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>   </Currency>      '
  '        <Dimension1 />              <Dimension2 />              <Dimension3 />              <Dimension4 />            </PartyBankAccount>            <PartyBankAccount>              <BankNumber>19100</BankNumber>           '
  '   <AccountNumber>88877766655</AccountNumber>              <IBAN>AT981910088877766655</IBAN>              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dime'
  'nsion3 />              <Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Partner</Name>        </Type>        <Active>true</Active>      </S'
  'upplier>      <Buyer>        <Metadata>          <Number>1043</Number>          <SiteCode />          <CorporateGroupID>1043</CorporateGroupID>          <IsMasterdata>true</IsMasterdata>          <Name1>Dynatos Ãsterreich'
  ' GmbH</Name1>          <Name2 />          <Address1>Heugasse 1</Address1>          <Address2 />          <PoBox />          <PostalCode>1121</PostalCode>          <City>Wien</City>          <State />          <Location'
  ' />          <CountryCode>AT</CountryCode>          <Telephone />          <EmailAddress>info@dynatos.be</EmailAddress>          <PaymentTerms />          <PaymentMethod />          <Dimension1 />          <Dimension2 />'
  '          <Dimension3 />          <Dimension4 />          <Dimension5 />          <Dimension6 />          <Dimension7 />          <Dimension8 />          <PartyRegistrationNumbers>            <PartyRegistrationNumber>'
  '              <Number>ABC123</Number>              <Scheme>VAT</Scheme>            </PartyRegistrationNumber>          </PartyRegistrationNumbers>          <PartyBankAccounts>            <PartyBankAccount>              <BankN'
  'umber />              <AccountNumber />              <IBAN />              <BIC />              <Currency>EUR</Currency>              <Dimension1 />              <Dimension2 />              <Dimension3 />              '
  '<Dimension4 />            </PartyBankAccount>          </PartyBankAccounts>        </Metadata>        <Type>          <Name>Company</Name>        </Type>        <Active>true</Active>      </Buyer>      <DocumentRec'
  'eiver>        <Id>0</Id>        <Number>43001</Number>        <VatNumber>ATU99999993</VatNumber>        <Name>OMV AG</Name>        <Street>Rennbahnstrasse 61</Street>        <PostalCode>1020</PostalCode>        <City>Wien<'
  '/City>        <Country>AT</Country>        <ExternalUniqueId>1043</ExternalUniqueId>      </DocumentReceiver>      <DocumentSupplier>        <Id>0</Id>        <Number>1043</Number>        <Name>Dynatos Ãsterreich GmbH</Na'
  'me>        <RegistrationNumber1>ABC123</RegistrationNumber1>        <Street>Heugasse 1</Street>        <PostalCode>1121</PostalCode>        <City>Wien</City>        <Country>AT</Country>        <CorporateGroupID>1043</Corporat'
  'eGroupID>      </DocumentSupplier>      <Id>56</Id>      <DocumentReference>IV_4500022682_1</DocumentReference>      <OrderReference>4500022682</OrderReference>      <ReceiptReference />      <DocumentDate>2022-02-21T00:00:00<'
  '/DocumentDate>      <PaymentReference />      <PaymentTerms />      <DocumentType>Invoice</DocumentType>      <DocumentSubType>PO</DocumentSubType>      <Currency>EUR</Currency>      <CurrencyRate p4:nil="true" xmlns:p4="ht'
  'tp://www.w3.org/2001/XMLSchema-instance" />      <TotalNetAmount>8000.00</TotalNetAmount>      <TotalVatAmount>1520.00</TotalVatAmount>      <TotalGrossAmount>9520.00</TotalGrossAmount>      <TotalDiscountAmount>0.00</TotalDiscountAm'
  'ount>      <DocumentReceiversNumber>43001</DocumentReceiversNumber>      <DocumentReceiversName>OMV AG</DocumentReceiversName>      <DocumentReceiversRegistrationNumber1>ATU99999993</DocumentReceiversRegistrationNumber1>      <Documen'
  'tReceiversIban>AT421910098765454321</DocumentReceiversIban>      <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>      <DocumentSuppliersName>Dynatos ?sterreich GmbH</DocumentSuppliersName>      <DocumentSuppliersRegistrationNumber'
  '1>ABC123</DocumentSuppliersRegistrationNumber1>      <VatRate1>NaN</VatRate1>      <VatRate2 />      <VatRate3 />      <VatRate4 />      <VatRate5 />      <HeaderText1 />      <HeaderText2 />      <ReceptionDate>2022-0'
  '2-21T00:00:00</ReceptionDate>      <BookingNumber>0</BookingNumber>      <BookingDate>2022-02-28T00:00:00</BookingDate>      <BookingYear>2022</BookingYear>      <BookingMonth>2</BookingMonth>      <DocumentSetId>66</DocumentSetId'
  '>      <DocumentRawId>166</DocumentRawId>      <Dimension1 />      <Dimension2 />      <Dimension3 />      <Dimension4 />      <Dimension5 />      <Dimension6 />      <Dimension7 />      <Dimension8 />      <Va'
  'tSystem>S</VatSystem>      <SupplierNumber>43001</SupplierNumber>      <SupplierName>OMV AG</SupplierName>      <SupplierRegistrationNumber>ATU99999993</SupplierRegistrationNumber>      <SupplierIban>AT421910098765454321</SupplierIban'
  '>      <BuyerNumber>1043</BuyerNumber>      <BuyerName>Dynatos ?sterreich GmbH</BuyerName>      <BuyerRegistrationNumber>ABC123</BuyerRegistrationNumber>    </PurchaseInvoiceHeader>    <PurchaseInvoiceLines>      <PurchaseInvo'
  'iceLine> <LineId>1</LineId> <FinalInv>X</FinalInv> <ArticleNumberSupplier /> <ArticleNumberBuyer /> <ArticleDescription>Casings</ArticleDescription>        <StandardArticleNumber />        <Quantity>100.000000</Quantity>'
  '        <UnitCode>H87</UnitCode>        <Price>80.000000</Price>        <LineAmount>8000.000000</LineAmount>        <Status>Matched</Status>        <PurchaseInvoiceHeaderId>56</PurchaseInvoiceHeaderId>        <OrderReference>45'
  '00022682</OrderReference>        <OrderLineId>4500022682</OrderLineId>        <ReceiptReference />        <ReceiptLineId />        <Dimension1 />        <Dimension2 />        <Dimension3 />        <Dimension4 />       '
  ' <Dimension5 />        <Dimension6 />        <Dimension7 />        <Dimension8 />        <VatAmount>1520.000000</VatAmount>        <VatRate>19.0000</VatRate>        <PurchaseOrderLinesId>10784</PurchaseOrderLinesId>       '
  ' <EanCode />      </PurchaseInvoiceLine>    </PurchaseInvoiceLines>    <PurchaseInvoiceCodingLines>      <PurchaseInvoiceCodingLine>        <GlAccount>400000</GlAccount>        <CostCenter>1043</CostCenter>        <DebitAm'
  'ount>8000.00</DebitAmount>        <VatAmount>1520.00</VatAmount>        <VatRate>19.000000000000000000</VatRate>        <VatCode>VA</VatCode>        <VatSystem>S</VatSystem>        <Status>POLine</Status>        <HeaderId>56</'
  'HeaderId>        <PurchaseInvoiceLinesId>149</PurchaseInvoiceLinesId>      </PurchaseInvoiceCodingLine>    </PurchaseInvoiceCodingLines>    <PurchaseInvoiceIntrastatLines />    <PurchaseInvoicePaymentScheduleLines />    <Match'
  'ingExceptions />    <ArchiveLinks>      <Link>X2PaQk6QaOlqtJGsFTIt1g==</Link>      <Link>TooELfAdWi1JVO+OyCOzyg==</Link>    </ArchiveLinks>    <Attachments>      <Attachment>        <Filename>Base_41babc06-9205-4ea7-ae84-3'
  'faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBCYXNlIGF0dGFjaG1lbnQ=</Data>        <MimeType>text/xml</MimeType>        <Type>Base Document</Type>      '
  '</Attachment>      <Attachment>        <Filename>41babc06-9205-4ea7-ae84-3faf8860c70e_generated.pdf</Filename>        <Data>VGhpcyBpcyBnZW5lcmF0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>application/pdf</MimeType>         <Type>'
  'Sales Invoice</Type>      </Attachment>      <Attachment>        <Filename>Converted_41babc06-9205-4ea7-ae84-3faf8860c70e.xml</Filename>        <Data>VGhpcyBpcyBDb252ZXJ0ZWQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeT'
  'ype>        <Type>Converted Document</Type>      </Attachment>      <Attachment>        <Filename>AccountingDocument_41babc06-9205-4ea7-ae84-3faf8860c70e_2022-02-21_11-20-34-777.xml</Filename>        '
  '<Data>VGhpcyBpcyBBY2NvdW50aW5nRG9jdW1lbnQgYXR0YWNobWVudA==</Data>        <MimeType>text/xml</MimeType>        <Type>Attachment</T'
  'ype>      </Attachment>    </Attachments>  </PurchaseInvoiceData>  <PurchaseOrderMasterDataList>    <PurchaseOrderMasterData>      <PurchaseOrderHeader>        <DocumentReference>4500022682</DocumentReference>        <'
  'ExtraReference />        <DocumentDate>2022-02-21T00:00:00</DocumentDate>        <DocumentType>NB</DocumentType>        <DocumentSubType />        <Currency>EUR</Currency>        <TotalNetAmount>8000.00</TotalNetAmount>       '
  ' <TotalVatAmount>0.00</TotalVatAmount>        <TotalGrossAmount>8000.00</TotalGrossAmount>        <TotalDiscountAmount>0.00</TotalDiscountAmount>        <OrderReference />        <DocumentReceiversNumber>43001</DocumentReceiversNumber'
  '>        <DocumentReceiversName>OMV AG</DocumentReceiversName>        <DocumentReceiversRegistrationNumber1 />        <DocumentSuppliersNumber>1043</DocumentSuppliersNumber>        <DocumentSuppliersName />        <HeaderText1 />'
  '        <HeaderText2 />        <DocumentStatus>Open</DocumentStatus>        <RequesterId />        <SuppliersName>OMV AG</SuppliersName>        <SupplierName>OMV AG</SupplierName>        <SuppliersNumber>43001</SuppliersNumber>'
  '        <SupplierNumber>43001</SupplierNumber>        <SuppliersRegistrationNumber />        <SupplierRegistrationNumber />        <BuyerName />        <BuyerNumber>1043</BuyerNumber>        <ReceiversName />        <Recei'
  'verName />        <ReceiversNumber>1043</ReceiversNumber>        <ReceiverNumber>1043</ReceiverNumber>      </PurchaseOrderHeader>      <PurchaseOrderLines>        <PurchaseOrderLine>          <Id>10784</Id>          <Line'
  'Id>10</LineId>          <ExtraReference>4500022682</ExtraReference>          <ArticleNumberSupplier />          <ArticleNumberBuyer>100-100</ArticleNumberBuyer>          <ArticleDescription>Casings</ArticleDescription>          <S'
  'tandardArticleNumber />          <Quantity>100.000000</Quantity>          <UnitCode>ST</UnitCode>          <Price>80.000000</Price>          <DiscountAmount>0.000000</DiscountAmount>          <LineAmount>8000.000000</LineAmount>'
  '          <Status />          <GlAccount />          <CostCenter />          <VatCode />          <Dimension1 />          <Dimension2 />          <Dimension3 />          <Dimension4 />          <Dimension5 />    '
  '      <Dimension6 />          <Dimension7 />          <Dimension8 />          <StartDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />          <EndDate p6:nil="true" xmlns:p6="http://www.w3.org/2001/XML'
  'Schema-instance" />          <InvoicedQuantity>0.000000</InvoicedQuantity>          <InvoicedAmount>0.000000</InvoicedAmount>        </PurchaseOrderLine>      </PurchaseOrderLines>    </PurchaseOrderMasterData>  </PurchaseOrd'
  'erMasterDataList></PurchaseInvoice>' INTO ls_value.
  add_method lt_scenario 3 'CALL_HTTP' 'ES_RESULT' ls_value.

  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' '' ''.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_OBJ'       'IV'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_ENV'       'XB'.
  add_method     lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IC_MAPID'     'ROUTTY'.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_EXTDATA'   lr_rfc_extdata.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_ARCHIVING' lr_rfc_archiving.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'IT_CONTENT'   lr_rfc_content.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_BO_HDR'    lr_rfc_bo_hdr.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ES_STATUS'    lr_rfc_status.
  add_method_ref lt_scenario 4 'EBY_PDBO_RFC_DATA_RECEIVE' 'ET_MESSAGES'  lr_rfc_messages.

  add_method lt_scenario 5 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 5 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 5 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.

  add_method lt_scenario 6 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 6 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 7 'CALL_HTTP' '' ''.
  add_method lt_scenario 7 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_INPUT'       '{"successful":true,"errorcode":"","errormessage":""}'.
  add_method lt_scenario 7 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e/technical-acknowledgment'.
  add_method lt_scenario 7 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 7 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  add_method lt_scenario 8 'CREATE_REL_URL' '' ''.
  add_method lt_scenario 8 'CREATE_REL_URL' 'PATH'     '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'STATEFUL' '1-'.
  add_method lt_scenario 8 'CREATE_REL_URL' 'URL'      '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.

  add_method lt_scenario 9 'SET_HEADER_FIELD' '' ''.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'NAME'  'Accept'.
  add_method lt_scenario 9 'SET_HEADER_FIELD' 'VALUE' 'application/json'.

  add_method lt_scenario 10 'CALL_HTTP' '' ''.
  add_method lt_scenario 10 'CALL_HTTP' 'IC_METHOD' 'PUT'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_INPUT'       '{"status":"OK","code":"Processed","message":"Document transferred from ROUTTY 41BABC0692054EA7AE843FAF8860C70E to PDAP 3010"}'.
  add_method lt_scenario 10 'CALL_HTTP' 'IS_URL'         '/output-api/output-documents/41babc06-9205-4ea7-ae84-3faf8860c70e'.
  add_method lt_scenario 10 'CALL_HTTP' 'EI_RETURN_CODE' '200'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_MEDIA_TYPE'  'application/json'.
  add_method lt_scenario 10 'CALL_HTTP' 'ES_RESULT'      '{"Message":"Processed Acknowlagement","Success":true}'.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD get_sc_supplier_to_routty_09.

**************************************************************************************************
* Scenario: Supplier is transferred from SAP to local file
* Version: 09, one company code, two vendors
*             one vendor is blocked, full update with inactive vendors skipped
**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_vendors        TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_vendors> TYPE zdyn_lstr_vmd,
                 <st_vendor> LIKE LINE OF <t_vendors>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_vendors( EXPORTING ii_num_of_comp_codes = 1
                                ii_num_of_vendors    = 2
                      IMPORTING er_sel_opt           = lr_sel_opt
                                er_vendors           = lr_vendors ).
  ASSIGN lr_vendors->* TO <t_vendors>.
* Let vendor 44001 be blocked for posting
  READ TABLE <t_vendors> WITH KEY lifnr = '0000044001' ASSIGNING <st_vendor>.
  <st_vendor>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_vendor_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_vendor_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_supplier_file_09( EXPORTING ii_number = 1
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_VENDORS' '' ''.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_OPT'         lr_sel_opt.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'ET_VENDORS'         lr_vendors.

* vendor 43001
  add_method     lt_scenario 2 'GET_VENDOR_BANKS' '' ''.
  add_method     lt_scenario 2 'GET_VENDOR_BANKS' 'IC_VENDOR' '0000043001'.
  add_method_ref lt_scenario 2 'GET_VENDOR_BANKS' 'ET_BANKS'  lr_banks_01.

  add_method lt_scenario 3 'GET_IBAN' '' ''.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKN' '88877766655'.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 3 'GET_IBAN' 'EC_IBAN'  'AT981910088877766655'.

  add_method lt_scenario 4 'GET_SWIFT' '' ''.
  add_method lt_scenario 4 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 4 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 4 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 5 'GET_IBAN' '' ''.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKN' '98765454321'.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 5 'GET_IBAN' 'EC_IBAN'  'AT421910098765454321'.

  add_method lt_scenario 6 'GET_SWIFT' '' ''.
  add_method lt_scenario 6 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 6 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 6 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000730189'.
  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@omv.at'.

* File
  add_method     lt_scenario 8 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 8 'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 8 'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 8 'STORE_FILE_ON_CLIENT' 'II_LENGTH'   473.
  add_method_ref lt_scenario 8 'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 8 'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.


  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD get_sc_supplier_to_routty_10.

**************************************************************************************************
* Scenario: Supplier is transferred from SAP to local file
* Version: 10, one company code, two vendors
*             one vendor is blocked, full update with inactive vendors taken
**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_vendors        TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_vendors> TYPE zdyn_lstr_vmd,
                 <st_vendor> LIKE LINE OF <t_vendors>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_vendors( EXPORTING ii_num_of_comp_codes = 1
                                ii_num_of_vendors    = 2
                      IMPORTING er_sel_opt           = lr_sel_opt
                                er_vendors           = lr_vendors ).
  ASSIGN lr_vendors->* TO <t_vendors>.
* Let vendor 44001 be blocked for posting
  READ TABLE <t_vendors> WITH KEY lifnr = '0000044001' ASSIGNING <st_vendor>.
  <st_vendor>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_vendor_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_vendor_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_supplier_file_09( EXPORTING ii_number = 2
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_VENDORS' '' ''.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_OPT'         lr_sel_opt.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'ET_VENDORS'         lr_vendors.

* vendor 43001
  add_method     lt_scenario 2 'GET_VENDOR_BANKS' '' ''.
  add_method     lt_scenario 2 'GET_VENDOR_BANKS' 'IC_VENDOR' '0000043001'.
  add_method_ref lt_scenario 2 'GET_VENDOR_BANKS' 'ET_BANKS'  lr_banks_01.

  add_method lt_scenario 3 'GET_IBAN' '' ''.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKN' '88877766655'.
  add_method lt_scenario 3 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 3 'GET_IBAN' 'EC_IBAN'  'AT981910088877766655'.

  add_method lt_scenario 4 'GET_SWIFT' '' ''.
  add_method lt_scenario 4 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 4 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 4 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 5 'GET_IBAN' '' ''.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKN' '98765454321'.
  add_method lt_scenario 5 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 5 'GET_IBAN' 'EC_IBAN'  'AT421910098765454321'.

  add_method lt_scenario 6 'GET_SWIFT' '' ''.
  add_method lt_scenario 6 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 6 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 6 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000730189'.
  add_method lt_scenario 7 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@omv.at'.

* vendor 44001
*  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' '' ''.
*  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'IC_OBJECT_ID'  '0000044001'.
*  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'ID_DATE'       '20220101'.
*  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'RB_RESULT'     'X'.

  add_method     lt_scenario 8 'GET_VENDOR_BANKS' '' ''.
  add_method     lt_scenario 8 'GET_VENDOR_BANKS' 'IC_VENDOR' '0000044001'.
  add_method_ref lt_scenario 8 'GET_VENDOR_BANKS' 'ET_BANKS'  lr_banks_02.

  add_method lt_scenario 9 'GET_IBAN' '' ''.
  add_method lt_scenario 9 'GET_IBAN' 'IC_BANKL' '55555'.
  add_method lt_scenario 9 'GET_IBAN' 'IC_BANKN' '12345678901'.
  add_method lt_scenario 9 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 9 'GET_IBAN' 'EC_IBAN'  'DE985555512345678901'.

  add_method lt_scenario 10 'GET_SWIFT' '' ''.
  add_method lt_scenario 10 'GET_SWIFT' 'IC_BANKL' '55555'.
  add_method lt_scenario 10 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 10 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 11 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 11 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000730200'.
  add_method lt_scenario 11 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@deutsch.de'.

* File
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' 'II_LENGTH'   654.
  add_method_ref lt_scenario 12 'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 12 'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
METHOD get_sc_supplier_to_routty_11.

**************************************************************************************************
* Scenario: Supplier is transferred from SAP to local file
* Version: 10, one company code, two vendors
*             one vendor is blocked, incremental (modification date provided), with inactive vendors taken
**************************************************************************************************

  DATA: lr_banks_01       TYPE REF TO data,
        lr_banks_02       TYPE REF TO data,
        lr_vendors        TYPE REF TO data,
        lr_sel_opt        TYPE REF TO data,
        lr_sel_comp_codes TYPE REF TO data,
        lr_file           TYPE REF TO data,

        lt_scenario       LIKE mst_scenario-scenario,
        lst_val           LIKE LINE OF lt_scenario,
        ls_value          LIKE lst_val-value.
  FIELD-SYMBOLS: <t_vendors> TYPE zdyn_lstr_vmd,
                 <st_vendor> LIKE LINE OF <t_vendors>.

**************************************************************************************************
**************************************************************************************************
* Data for the RFC in PD
  create_get_vendors( EXPORTING ii_num_of_comp_codes = 1
                                ii_num_of_vendors    = 2
                      IMPORTING er_sel_opt           = lr_sel_opt
                                er_vendors           = lr_vendors ).
  ASSIGN lr_vendors->* TO <t_vendors>.
* Let vendor 44001 be blocked for posting
  READ TABLE <t_vendors> WITH KEY lifnr = '0000044001' ASSIGNING <st_vendor>.
  <st_vendor>-sperr = abap_true.

  create_company_codes_01( IMPORTING er_sel_opt = lr_sel_comp_codes ).
  create_get_vendor_banks_01( IMPORTING er_banks = lr_banks_01 ).
  create_get_vendor_banks_02( IMPORTING er_banks = lr_banks_02 ).

  create_supplier_file_09( EXPORTING ii_number = 2
                           IMPORTING er_data   = lr_file ).

**************************************************************************************************
**************************************************************************************************

* Scenario definition

  mst_scenario-current_id = 1.

  add_method     lt_scenario 1 'GET_VENDORS' '' ''.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_OPT'         lr_sel_opt.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'IT_SEL_COMP_CODES'  lr_sel_comp_codes.
  add_method_ref lt_scenario 1 'GET_VENDORS' 'ET_VENDORS'         lr_vendors.

* vendor 43001
  add_method lt_scenario 2 'IS_OBJECT_MODIFIED' '' ''.
  add_method lt_scenario 2 'IS_OBJECT_MODIFIED' 'IC_OBJECT_ID'  '0000043001'.
  add_method lt_scenario 2 'IS_OBJECT_MODIFIED' 'ID_DATE'       '20220101'.
  add_method lt_scenario 2 'IS_OBJECT_MODIFIED' 'RB_RESULT'     'X'.

  add_method     lt_scenario 3 'GET_VENDOR_BANKS' '' ''.
  add_method     lt_scenario 3 'GET_VENDOR_BANKS' 'IC_VENDOR' '0000043001'.
  add_method_ref lt_scenario 3 'GET_VENDOR_BANKS' 'ET_BANKS'  lr_banks_01.

  add_method lt_scenario 4 'GET_IBAN' '' ''.
  add_method lt_scenario 4 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 4 'GET_IBAN' 'IC_BANKN' '88877766655'.
  add_method lt_scenario 4 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 4 'GET_IBAN' 'EC_IBAN'  'AT981910088877766655'.

  add_method lt_scenario 5 'GET_SWIFT' '' ''.
  add_method lt_scenario 5 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 5 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 5 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 6 'GET_IBAN' '' ''.
  add_method lt_scenario 6 'GET_IBAN' 'IC_BANKL' '19100'.
  add_method lt_scenario 6 'GET_IBAN' 'IC_BANKN' '98765454321'.
  add_method lt_scenario 6 'GET_IBAN' 'IC_BANKS' 'AT'.
  add_method lt_scenario 6 'GET_IBAN' 'EC_IBAN'  'AT421910098765454321'.

  add_method lt_scenario 7 'GET_SWIFT' '' ''.
  add_method lt_scenario 7 'GET_SWIFT' 'IC_BANKL' '19100'.
  add_method lt_scenario 7 'GET_SWIFT' 'IC_BANKS' 'AT'.
  add_method lt_scenario 7 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 8 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 8 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000730189'.
  add_method lt_scenario 8 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@omv.at'.

* vendor 44001
  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' '' ''.
  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'IC_OBJECT_ID'  '0000044001'.
  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'ID_DATE'       '20220101'.
  add_method lt_scenario 9 'IS_OBJECT_MODIFIED' 'RB_RESULT'     'X'.

  add_method     lt_scenario 10 'GET_VENDOR_BANKS' '' ''.
  add_method     lt_scenario 10 'GET_VENDOR_BANKS' 'IC_VENDOR' '0000044001'.
  add_method_ref lt_scenario 10 'GET_VENDOR_BANKS' 'ET_BANKS'  lr_banks_02.

  add_method lt_scenario 11 'GET_IBAN' '' ''.
  add_method lt_scenario 11 'GET_IBAN' 'IC_BANKL' '55555'.
  add_method lt_scenario 11 'GET_IBAN' 'IC_BANKN' '12345678901'.
  add_method lt_scenario 11 'GET_IBAN' 'IC_BANKS' 'DE'.
  add_method lt_scenario 11 'GET_IBAN' 'EC_IBAN'  'DE985555512345678901'.

  add_method lt_scenario 12 'GET_SWIFT' '' ''.
  add_method lt_scenario 12 'GET_SWIFT' 'IC_BANKL' '55555'.
  add_method lt_scenario 12 'GET_SWIFT' 'IC_BANKS' 'DE'.
  add_method lt_scenario 12 'GET_SWIFT' 'RC_SWIFT' ''.

  add_method lt_scenario 13 'GET_EMAIL_FROM_ADR6' '' ''.
  add_method lt_scenario 13 'GET_EMAIL_FROM_ADR6' 'IC_ADRNR' '0000730200'.
  add_method lt_scenario 13 'GET_EMAIL_FROM_ADR6' 'RS_EMAIL' 'test@deutsch.de'.

* File
  add_method     lt_scenario 14 'STORE_FILE_ON_CLIENT' '' ''.
  add_method     lt_scenario 14 'STORE_FILE_ON_CLIENT' 'IS_FILENAME' '/test_path/Partner_1.csv'.
  add_method     lt_scenario 14 'STORE_FILE_ON_CLIENT' 'IS_FILETYPE' 'BIN'.
  add_method     lt_scenario 14 'STORE_FILE_ON_CLIENT' 'II_LENGTH'   654.
  add_method_ref lt_scenario 14 'STORE_FILE_ON_CLIENT' 'IT_DATA'     lr_file.
  add_method     lt_scenario 14 'STORE_FILE_ON_CLIENT' 'RB_OK'       abap_true.

  mst_scenario-scenario = lt_scenario.
  GET REFERENCE OF mst_scenario INTO er_scenario.

ENDMETHOD.
