<?xml version="1.0" encoding="utf-8"?> <ENHO enhancement_id="ZSPP_MODIF_EN_PED_OF_LIB" shorttext="Modificaciones en pedidos con OF liberada" tooltype_id="HOOK_IMPL" orig_object="R3TR-SAPMV45A-PROG-SAPMV45A">  <asx:abap xmlns:asx="http://www.sap.com/abapxm
l" version="1.0">   <asx:values>    <IMPLS>     <ENH_HOOK_IMPL>      <SPOTNAME/>      <PROGRAMNAME>SAPMV45A</PROGRAMNAME>      <EXTID>1</EXTID>      <ID>1</ID>      <OVERWRITE/>      <METHOD/>      <ENHMODE>D</ENHMODE>      <FULL_NAME>\PR:SAPMV45A\FO:USER
EXIT_CHECK_VBAP\SE:BEGIN\EI</FULL_NAME>      <SOURCE>       <item>data: V_AUFNR2 like AUFK-AUFNR,</item>       <item>V_OBJNR2 like JEST-OBJNR.</item>       <item/>       <item>if VBAP-SOBKZ eq &apos;E&apos; and ( ( VBAP-BEDAE eq &apos;ZZZ&apos; or VBAP-BE
DAE eq &apos;ZSAR&apos; or VBAP-BEDAE eq &apos;ZPAC&apos; or VBAP-BEDAE eq &apos;ZRS&apos;  or VBAP-BEDAE eq &apos;ZRP&apos; )</item>       <item>or ( vbap-WERKS = &apos;2000&apos; ) ).</item>       <item>if VBAK-VBTYP eq &apos;C&apos; and SY-TCODE eq &ap
os;VA02&apos;.</item>       <item/>       <item>if VBAP-POSNR eq YVBAP-POSNR.</item>       <item/>       <item>if VBAP-SOBKZ eq &apos;E&apos;.</item>       <item>select AUFNR into V_AUFNR2</item>       <item>from AFPO</item>       <item>where KDAUF = VBAK
-VBELN</item>       <item>and KDPOS eq VBAP-POSNR.</item>       <item/>       <item>if SY-SUBRC eq 0.</item>       <item>concatenate &apos;OR&apos; V_AUFNR2 into V_OBJNR2.</item>       <item>endif.</item>       <item/>       <item>select single * from JES
T</item>       <item>where OBJNR = V_OBJNR2 and</item>       <item>STAT = &apos;I0002&apos; and</item>       <item>INACT = &apos;&apos; and not exists ( select * from JEST client specified</item>       <item>where MANDT = SY-MANDT</item>       <item>and O
BJNR = V_OBJNR2</item>       <item>and STAT = &apos;I0076&apos;</item>       <item>and INACT = &apos;&apos; ).</item>       <item/>       <item/>       <item>if SY-SUBRC eq 0.</item>       <item/>       <item>if VBAP-KWMENG ne YVBAP-KWMENG.</item>       <
item>message id &apos;ZV&apos; type &apos;E&apos; number &apos;003&apos;.</item>       <item>endif.</item>       <item/>       <item>if VBAP-ABGRU ne SPACE.</item>       <item>message id &apos;ZV&apos; type &apos;E&apos; number &apos;002&apos;.</item>
   <item>endif.</item>       <item/>       <item>&quot;JVM - 09/12/2022 - permitir modificar fecha sólo</item>       <item>*              IF vbep-edatu NE yvbep-edatu AND yvbep-edatu NE &apos;00000000&apos; and</item>       <item>*                vbep-pos
nr eq vbap-posnr and yvbep-posnr eq yvbap-posnr.</item>       <item>*                MESSAGE ID &apos;ZV&apos; TYPE &apos;E&apos; NUMBER &apos;004&apos;.</item>       <item>*</item>       <item>*            ENDIF.</item>       <item>&quot;FJVM - 09/12/202
2 - permitir modificar fecha sólo</item>       <item>endif.</item>       <item>endselect.</item>       <item/>       <item/>       <item>endif.</item>       <item>endif.</item>       <item>endif.</item>       <item>endif.</item>      </SOURCE>      <PAREN
T_FULL_NAME/>     </ENH_HOOK_IMPL>     <ENH_HOOK_IMPL>      <SPOTNAME/>      <PROGRAMNAME>SAPMV45A</PROGRAMNAME>      <EXTID>2</EXTID>      <ID>2</ID>      <OVERWRITE/>      <METHOD/>      <ENHMODE>D</ENHMODE>      <FULL_NAME>\PR:SAPMV45A\FO:USEREXIT_CHEC
K_XVBAP_FOR_DELET\SE:BEGIN\EI</FULL_NAME>      <SOURCE>       <item/>       <item>DATA wa_JEST TYPE jest.</item>       <item>data: V_AUFNR2 like AUFK-AUFNR,</item>       <item>V_OBJNR2 like JEST-OBJNR.</item>       <item/>       <item>if VBAK-VKORG eq &ap
os;2001&apos; or vbap-werks = &apos;2000&apos;.</item>       <item>if VBAK-VBTYP eq &apos;C&apos; and SY-TCODE eq &apos;VA02&apos;.</item>       <item>if VBAP-POSNR eq XVBAP-POSNR.</item>       <item/>       <item>*        if VBAP-SOBKZ eq &apos;E&apos; a
nd ( VBAP-BEDAE eq &apos;ZZZ&apos; or VBAP-BEDAE eq &apos;ZSAR&apos; or VBAP-BEDAE eq &apos;ZPAC&apos; or VBAP-BEDAE eq &apos;ZRS&apos;  or VBAP-BEDAE eq &apos;ZRP&apos; ) .</item>       <item>if VBAP-SOBKZ eq &apos;E&apos; and ( ( VBAP-BEDAE eq &apos;ZZZ
&apos; or VBAP-BEDAE eq &apos;ZSAR&apos; or VBAP-BEDAE eq &apos;ZPAC&apos; or VBAP-BEDAE eq &apos;ZRS&apos;  or VBAP-BEDAE eq &apos;ZRP&apos; )</item>       <item>or ( vbap-WERKS = &apos;2000&apos; ) ).</item>       <item>select  AUFNR into V_AUFNR2</item
>       <item>from AFPO</item>       <item>where KDAUF = VBAP-VBELN</item>       <item>and KDPOS eq VBAP-POSNR.</item>       <item/>       <item>if SY-SUBRC eq 0.</item>       <item>concatenate &apos;OR&apos; V_AUFNR2 into V_OBJNR2.</item>       <item>end
if.</item>       <item/>       <item>select single * from JEST INTO wa_JEST</item>       <item>where OBJNR = V_OBJNR2 and</item>       <item>STAT = &apos;I0002&apos; and</item>       <item>INACT = &apos;&apos; and not exists ( select * from JEST client sp
ecified</item>       <item>where MANDT = SY-MANDT</item>       <item>and OBJNR = V_OBJNR2</item>       <item>and STAT = &apos;I0076&apos;</item>       <item>and INACT = &apos;&apos; ).</item>       <item/>       <item>if SY-SUBRC eq 0.</item>       <item>
if  US_ERROR ne SPACE.</item>       <item>message id &apos;ZV&apos; type &apos;E&apos; number &apos;002&apos; with VBAP-POSNR.</item>       <item>endif.</item>       <item/>       <item>endif.</item>       <item>endselect.</item>       <item>endif.</item>
       <item>endif.</item>       <item>endif.</item>       <item>endif.</item>       <item/>       <item/>      </SOURCE>      <PARENT_FULL_NAME/>     </ENH_HOOK_IMPL>    </IMPLS>   </asx:values>  </asx:abap> </ENHO>
