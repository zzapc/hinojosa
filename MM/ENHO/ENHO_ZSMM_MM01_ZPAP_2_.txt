<?xml version="1.0" encoding="utf-8"?> <ENHO enhancement_id="ZSMM_MM01_ZPAP_2" shorttext="Para MM01" tooltype_id="HOOK_IMPL" orig_object="R3TR-MGMM-FUGR-SAPLMGMM">  <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">   <asx:values>    <IMPLS>
    <ENH_HOOK_IMPL>      <SPOTNAME/>      <PROGRAMNAME>SAPLMGMM</PROGRAMNAME>      <EXTID>1</EXTID>      <ID>1</ID>      <OVERWRITE/>      <METHOD/>      <ENHMODE>D</ENHMODE>      <FULL_NAME>\PR:SAPLMGMM\FO:MATNR_SPEZIAL_BTCI\SE:BEGIN\EI</FULL_NAME>
<SOURCE>       <item/>       <item>** Codificación inteligente de materiales</item>       <item>** En ALTA de materiales</item>       <item/>       <item>data: lv_matnr type matnr,</item>       <item>lv_texto(40).</item>       <item/>       <item>ranges:
lso_matkl for mara-matkl.</item>       <item/>       <item>IF sy-tcode = &apos;MM01&apos; AND rmmg1-mtart eq &apos;ZWIP&apos;.</item>       <item>*   MESSAGE E127(ZMM).</item>       <item>endif.</item>       <item/>       <item>* ini - cvivo - 13.06.19 -
Validación grupo de artículos correcto para tipo de material</item>       <item>CONCATENATE &apos;ZMM_VALID_MTART_&apos; rmmg1-mtart into lv_texto.</item>       <item/>       <item>select * from tvarvc</item>       <item>where name eq @lv_texto</item>
   <item>into table @data(t_tvarvc).</item>       <item/>       <item>if sy-subrc eq 0. &quot; aplica la validación</item>       <item>loop at t_tvarvc ASSIGNING FIELD-SYMBOL(&lt;tvarvc&gt;).</item>       <item>MOVE-CORRESPONDING &lt;tvarvc&gt; to lso_mat
kl.</item>       <item>lso_matkl-option = &lt;tvarvc&gt;-opti.</item>       <item>append lso_matkl.</item>       <item>clear lso_matkl.</item>       <item>endloop.</item>       <item>endif.</item>       <item>* fin - cvivo - 13.06.19 - Validación grupo de
 artículos correcto para tipo de material</item>       <item/>       <item>IF sy-tcode = &apos;MM01&apos; and RMMG1-MATNR is initial and</item>       <item>( rmmg1-mtart eq &apos;ZPLP&apos; or rmmg1-mtart eq &apos;ZPMP&apos; or</item>       <item>rmmg1-mt
art eq &apos;ZCON&apos; ).</item>       <item>CALL FUNCTION &apos;ZMM_POPUP_MATERIAL_CIPASI&apos;</item>       <item>EXPORTING</item>       <item>i_mtart       = rmmg1-mtart</item>       <item>I_MAT_REF     = RMMG1_REF-MATNR</item>       <item>IMPORTING</
item>       <item>O_MATNR       = lv_matnr</item>       <item>.</item>       <item/>       <item>rmmg1-matnr = lv_matnr.</item>       <item/>       <item>ELSE.</item>       <item>if t130m-aktyp = &apos;H&apos;.</item>       <item>select count(*) from tvar
vc</item>       <item>where name = &apos;ZCREACION_PAPEL&apos;</item>       <item>and   low  = &apos;X&apos;.</item>       <item/>       <item>if sy-subrc = 0.</item>       <item>clear lv_matnr.</item>       <item/>       <item>*     LAS BOBINAS SOLO PERM
ITEN NUMERACION x POPUP</item>       <item>IF RMMG1-MTART eq &apos;ZPAP&apos; And RMMG1-MATNR is not iNITIAL.</item>       <item>data REG_MARA TYPE MARA.</item>       <item>SELECT SINGLE * INTO REG_MARA FROM MARA WHERE MATNR EQ RMMG1-MATNR.</item>       <
item>IF SY-SUBRC NE 0.</item>       <item>MESSAGE E068(ZMM).</item>       <item>ENDIF.</item>       <item>* ini - cvivo - Proyecto WM - Papel pre-impreso</item>       <item>ELSEIF ( RMMG1-MTART EQ &apos;ZPIM&apos; OR RMMG1-MTART EQ &apos;ZPIH&apos; ) AND
RMMG1-MATNR IS NOT INITIAL. &quot; cvivo - proyecto WM CB</item>       <item>SELECT SINGLE * INTO REG_MARA FROM MARA WHERE MATNR EQ RMMG1-MATNR.</item>       <item>IF SY-SUBRC NE 0.</item>       <item>MESSAGE E147(ZMM).</item>       <item>ENDIF.</item>
    <item>* fin - cvivo - Proyecto WM - Papel pre-impreso</item>       <item>ENDIF.</item>       <item/>       <item>if rmmg1-matnr is initial and</item>       <item>( rmmg1-mtart eq &apos;ZPAP&apos; or</item>       <item>rmmg1-mtart eq &apos;ZROL&apos; o
r</item>       <item>rmmg1-mtart eq &apos;ZCAR&apos; or</item>       <item>rmmg1-mtart eq &apos;ZCAH&apos; or</item>       <item>rmmg1-mtart eq &apos;ZCAB&apos;).</item>       <item>CALL FUNCTION &apos;Z_MM_CODIGO_BOBINA&apos;</item>       <item>exporting
</item>       <item>i_MTART   = rmmg1-mtart</item>       <item>IMPORTING</item>       <item>O_MATNR   = lv_matnr.</item>       <item>* ini - cvivo - 13.06.19 - Validación grupo de artículos correcto para tipo de material</item>       <item>if lso_matkl[]
is not initial and lv_matnr+1(5) not in lso_matkl and rmmg1-mtart eq &apos;ZCAH&apos;. &quot; aplica validación</item>       <item>MESSAGE E172(ZMM) WITH rmmg1-mtart lv_matnr+1(5).</item>       <item>elseif lso_matkl[] is not initial and lv_matnr+5(5) not
 in lso_matkl and rmmg1-mtart ne &apos;ZCAH&apos;. &quot; aplica validación</item>       <item>MESSAGE E172(ZMM) WITH rmmg1-mtart lv_matnr+5(5).</item>       <item>endif.</item>       <item>* fin - cvivo - 13.06.19 - Validación grupo de artículos correcto
 para tipo de material</item>       <item>if ( rmmg1-mtart eq &apos;ZPAP&apos; or rmmg1-mtart eq &apos;ZCAH&apos; or rmmg1-mtart eq &apos;ZCAB&apos;).</item>       <item>rmmg1-matnr = lv_matnr.</item>       <item>endif.</item>       <item>* ini - cvivo -
Proyecto WM - Papel pre-impreso</item>       <item>ELSEIF rmmg1-matnr is initial and</item>       <item>( rmmg1-mtart eq &apos;ZPIM&apos; or rmmg1-mtart eq &apos;ZPIH&apos; ). &quot; cvivo - Proyecto WM CB - Papel pre-impreso hoja</item>       <item>CALL
FUNCTION &apos;Z_MM_CODIGO_PREIMPRESO&apos;</item>       <item>exporting</item>       <item>i_MTART   = rmmg1-mtart</item>       <item>IMPORTING</item>       <item>O_MATNR   = lv_matnr.</item>       <item>rmmg1-matnr = lv_matnr.</item>       <item>* fin -
 cvivo - Proyecto WM - Papel pre-impreso</item>       <item/>       <item>*--&gt; INI FCARDONA 16.11.2021 - Proyecto SAP Packaging y CUPS</item>       <item/>       <item>ELSEIF ( rmmg1-mtart EQ &apos;ZPTF&apos; OR</item>       <item>rmmg1-mtart EQ &apos;
ZCUP&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZTRO&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZCLI&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZPTC&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZPTL&apos; OR</item>       <item>rmmg1-
mtart EQ &apos;ZPTO&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZPTK&apos; OR</item>       <item>rmmg1-mtart EQ &apos;ZPSE&apos; ). &quot;SAP Packaging</item>       <item/>       <item>IF ( rmmg1-mbrsh IS INITIAL ).</item>       <item/>       <item>M
ESSAGE e099(M3).</item>       <item/>       <item>ELSE.</item>       <item/>       <item>IF ( rmmg1-matnr IS INITIAL ).</item>       <item/>       <item>CALL FUNCTION &apos;ZFM_CREATE_MATNR_FOLDER&apos;</item>       <item>EXPORTING</item>       <item>i_mb
rsh           = rmmg1-mbrsh</item>       <item>i_mtart           = rmmg1-mtart</item>       <item>*               I_PRODH           =</item>       <item>i_matnr_ref       = rmmg1_ref-matnr</item>       <item>IMPORTING</item>       <item>E_MATNR
= rmmg1-matnr.</item>       <item/>       <item>IF ( rmmg1-matnr IS INITIAL ).</item>       <item>&quot;TODO: Controlar error si no creamos material</item>       <item>ENDIF.</item>       <item/>       <item>ELSE.</item>       <item/>       <item>CALL FUN
CTION &apos;ZFM_MM_CHECK_MATNR_FOLDER&apos;</item>       <item>EXPORTING</item>       <item>i_matnr       = rmmg1-matnr</item>       <item>i_mtart       = rmmg1-mtart</item>       <item>i_mbrsh       = rmmg1-mbrsh</item>       <item>IMPORTING</item>
 <item>e_matnr       = rmmg1-matnr.</item>       <item/>       <item>ENDIF.</item>       <item/>       <item>ENDIF.</item>       <item>*&lt;-- FIN FCARDONA 16.11.2021 - Proyecto SAP Packaging y CUPS</item>       <item/>       <item>endif.</item>       <it
em>endif.</item>       <item>endif.</item>       <item>ENDIF.</item>      </SOURCE>      <PARENT_FULL_NAME/>     </ENH_HOOK_IMPL>    </IMPLS>   </asx:values>  </asx:abap> </ENHO>
