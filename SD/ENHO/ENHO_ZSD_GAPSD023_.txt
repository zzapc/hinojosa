<?xml version="1.0" encoding="utf-8"?> <ENHO enhancement_id="ZSD_GAPSD023" shorttext="Texto Comercial ZC04 en oferta a 1er pedido de venta" tooltype_id="HOOK_IMPL" orig_object="R3TR-SAPMV45A-PROG-SAPMV45A">  <asx:abap xmlns:asx="http://www.sap.com/abapxml
" version="1.0">   <asx:values>    <IMPLS>     <ENH_HOOK_IMPL>      <SPOTNAME/>      <PROGRAMNAME>SAPMV45A</PROGRAMNAME>      <EXTID>1</EXTID>      <ID>1</ID>      <OVERWRITE/>      <METHOD/>      <ENHMODE>D</ENHMODE>      <FULL_NAME>\PR:SAPMV45A\FO:USERE
XIT_SAVE_DOCUMENT\SE:BEGIN\EI</FULL_NAME>      <SOURCE>       <item>&quot; Nº GAP/Descripción  GAPSD023 Configuración de un Nuevo texto comercial de posición “ZC04 Texto 1er PEDIDO”.</item>       <item>&quot; Implementar User Exit para que al grabar en la
 creación del 1er Pedido se elimine el texto del documento de Oferta</item>       <item>&quot; y se copie en el texto comercial INACTIVO.</item>       <item/>       <item>DATA: lv_oferta TYPE vbak-vbeln,</item>       <item>lv_pedido TYPE vbak-vbeln,</item
>       <item>lt_vbfa   TYPE STANDARD TABLE OF vbfa,</item>       <item>r_auart TYPE RANGE OF auart,</item>       <item>lt_zssdt023 TYPE STANDARD TABLE OF zssdt023.</item>       <item/>       <item>SELECT * INTO TABLE lt_zssdt023</item>       <item>FROM z
ssdt023.</item>       <item/>       <item>r_auart = VALUE #( FOR wa IN lt_zssdt023 ( sign   = &apos;I&apos;</item>       <item>option = &apos;EQ&apos;</item>       <item>low    = wa-auart ) ).</item>       <item>IF sy-tcode = &apos;VA22&apos;.</item>
  <item>IF vbak-auart IN r_auart.</item>       <item>&quot; Modifica Textos de la oferta: pasa el texto del mat.SINGLE al definitivo</item>       <item>CALL FUNCTION &apos;ZSSDFM023&apos;</item>       <item>EXPORTING</item>       <item>oferta        = vba
k-vbeln</item>       <item>pedido        = lv_pedido</item>       <item>tcode         = sy-tcode</item>       <item>TABLES</item>       <item>xvbap         = xvbap.</item>       <item>ENDIF.</item>       <item>ENDIF.</item>       <item/>       <item>IF sy
-tcode = &apos;VA01&apos;.</item>       <item>IF r_auart[] IS NOT INITIAL.</item>       <item>&quot; Valida que tenga una oferta</item>       <item>IF vbak-vgbel IS NOT INITIAL.</item>       <item>SELECT SINGLE vbeln INTO lv_oferta</item>       <item>FROM
 vbak</item>       <item>WHERE vbeln = vbak-vgbel</item>       <item>AND auart IN r_auart.</item>       <item>IF sy-subrc EQ 0.</item>       <item>&quot; Valida que sea el primer pedido de ventas</item>       <item>SELECT * INTO TABLE lt_vbfa</item>
 <item>FROM vbfa</item>       <item>WHERE vbelv   = lv_oferta</item>       <item>AND vbtyp_n = &apos;C&apos;</item>       <item>AND vbtyp_v = &apos;B&apos;.</item>       <item>IF sy-subrc NE 0.</item>       <item>&quot; Modifica Textos de la oferta</item>
       <item>CALL FUNCTION &apos;ZSSDFM023&apos;</item>       <item>EXPORTING</item>       <item>oferta        = lv_oferta</item>       <item>pedido        = vbak-vbeln</item>       <item>tcode         = sy-tcode</item>       <item>TABLES</item>       <it
em>xvbap         = xvbap.</item>       <item>ENDIF.</item>       <item>ENDIF.</item>       <item>ENDIF.</item>       <item>ENDIF.</item>       <item>ENDIF.</item>      </SOURCE>      <PARENT_FULL_NAME/>     </ENH_HOOK_IMPL>    </IMPLS>   </asx:values>  </
asx:abap> </ENHO>
