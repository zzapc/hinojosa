<?xml version="1.0" encoding="utf-8"?> <ENHO enhancement_id="ZSD_ENH_POSITION_BUTTONS" shorttext="Botones de posición" tooltype_id="HOOK_IMPL" orig_object="R3TR-SAPMV45A-PROG-SAPMV45A">  <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">   <a
sx:values>    <IMPLS>     <ENH_HOOK_IMPL>      <SPOTNAME/>      <PROGRAMNAME>SAPMV45A</PROGRAMNAME>      <EXTID>1</EXTID>      <ID>1</ID>      <OVERWRITE/>      <METHOD/>      <ENHMODE>S</ENHMODE>      <FULL_NAME>\PR:SAPMV45A\FO:CUA_SETZEN\SE:END\EI</FULL
_NAME>      <SOURCE>       <item>*</item>       <item>**********************************************************************</item>       <item>* SAPMV45B --&gt; Sobreescribir GUI</item>       <item>*</item>       <item>* En este punto de ampliación sobre
escribimos el PF-STATUS de SAPMV45B</item>       <item>* para incluir un botón con el detalle de los pedidos / OFs en activo</item>       <item>* de un material.</item>       <item>**********************************************************************</it
em>       <item/>       <item>**********************************************************************</item>       <item>* Parámetros locales</item>       <item>**********************************************************************</item>       <item/>
   <item>FIELD-SYMBOLS: &lt;fs_vbap&gt; TYPE vbapvb.</item>       <item/>       <item>DATA: lt_r_mtart TYPE md_range_t_mtart,</item>       <item>lv_mtart   TYPE mtart.</item>       <item/>       <item>******************************************************
****************</item>       <item>* Lógica</item>       <item>**********************************************************************</item>       <item/>       <item>&quot;Si modulpool es SAPMV45B</item>       <item>IF modul-pool EQ &apos;SAPMV45B&apos;
.</item>       <item/>       <item>&quot;Comprobamos si status es P</item>       <item>IF ( t185v-status EQ &apos;P&apos; ).</item>       <item/>       <item>*** CHECK MTART</item>       <item/>       <item>&quot;Nos traemos los valores de posición</item>
       <item>ASSIGN (&apos;(SAPMV45A)XVBAP&apos;) TO &lt;fs_vbap&gt;.</item>       <item/>       <item>&quot;Chequeamos si los hemos obtenido</item>       <item>IF ( &lt;fs_vbap&gt; IS ASSIGNED ). &quot;Los hemos obtenido</item>       <item/>       <item>
TRY .</item>       <item/>       <item>&quot;Obtenemos tipos de material para los cuales hay que mostrar el botón</item>       <item>lt_r_mtart = zcl_mm_material_zpt=&gt;zintf_mm_material_master~s_get_mtart_compatibles( i_setname = zcl_mm_material_zpt=&gt
;_c_setname_value ).</item>       <item/>       <item>&quot;Obtenemos tipo de material de material en posición</item>       <item>SELECT SINGLE mtart</item>       <item>FROM mara</item>       <item>INTO lv_mtart</item>       <item>WHERE matnr EQ &lt;fs_vb
ap&gt;-matnr.</item>       <item/>       <item>&quot;Si está incluido...</item>       <item>IF ( lv_mtart IN lt_r_mtart ).</item>       <item/>       <item>*** SHOW BUTTON</item>       <item/>       <item>&quot;Sobreescribimos status con el customizado qu
e lleva el botón...</item>       <item>SET PF-STATUS &apos;P&apos; EXCLUDING cua_exclude OF PROGRAM &apos;ZSAPMV45B_ZGUI&apos;.</item>       <item/>       <item>ENDIF.</item>       <item/>       <item>CATCH zcx_mm_exception.</item>       <item/>       <it
em>&quot;No manejamos este error, si se produce no mostramos error</item>       <item/>       <item>ENDTRY.</item>       <item/>       <item>ENDIF.</item>       <item/>       <item>ENDIF.</item>       <item/>       <item>ENDIF.</item>       <item/>      <
/SOURCE>      <PARENT_FULL_NAME/>     </ENH_HOOK_IMPL>    </IMPLS>   </asx:values>  </asx:abap> </ENHO>
